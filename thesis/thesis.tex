\documentclass[titlepage]{article}

\usepackage{textcomp}
\usepackage{xspace}
\usepackage{url}
\usepackage{multirow}
\usepackage{hhline}
\usepackage{pifont}
\usepackage{amsmath, amsfonts , amsthm , mathtools , bbold , float}
\usepackage{tikz}
\usetikzlibrary{arrows,matrix,decorations.pathmorphing,
  decorations.markings, calc, backgrounds}
\usepackage{mathpartir}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{url}
\usepackage{lscape}
\DisableLigatures[-]{family=tt*}
\usepackage{enumitem}
\usepackage[titletoc]{appendix}

\newcommand\myeq{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily def}}}{=}}}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}

\input{macros}

\bibliographystyle{plainurl}


\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%            Abstract            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}

\end{abstract}

\tableofcontents
\thispagestyle{empty}
\newpage
\setcounter{page}{1}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%          Introduction          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    The Agda proof assistant    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Agda proof assistant}
Agda is a dependently typed programming language based on intuitionistic type theory. By encoding mathematical propositions as types and their proofs as programs, we can ensure that our reasoning is correct and consistent. Agda's type system also provides powerful tools for automatically checking the correctness of proofs\cite{BoveDybjer2008}.

\subsection{Propositions as types}
Propositions as types associates logical propositions with types in a programming language. It is based on the idea that a proof of a proposition is analogous to a program that satisfies the type associated with the proposition.

In this context, the introduction and elimination rules for logical connectives can be seen as operations that construct and deconstruct values of the corresponding types. For example, the introduction rule for conjunction says that if we have proofs of two propositions, we can construct a proof of their conjunction by pairing the two proofs together. This can be seen as a function that takes two values of the corresponding types and returns a pair value.

On the other hand, the elimination rule for conjunction says that if we have a proof of a conjunction, we can extract proofs of its two conjuncts by projecting the pair onto each component. This can be seen as a function that takes a pair value and returns two values of the corresponding types.

This is similar to the concept of product types in programming languages, where a product type is a type that represents a pair of values. The introduction form of a product type is a pair, and the elimination forms are projection functions that extract the individual components of the tuple. This chart summarizes the correspondence between proposition and types and between proofs and programs.

\begin{table}[h!]
    \centering
    \begin{tabular}{c | c}
        Prop & Type \\
        \hline
        $\top$ & unit \\
        $\bot$ & void \\
        $\phi_1 \wedge \phi_2$ & $\tau_1 \times \tau_2$ \\
        $\phi_1 \supset \phi_2$ & $\tau_1 \to \tau_2$ \\
        $\phi_1 \vee \phi_2$ & $\tau_1 + \tau_2$
    \end{tabular}
    \caption{Propositions as types}
\end{table}

This allows us to reason about logical propositions in terms of programming language types, and to use the tools and techniques of programming languages like \Agda to reason about logical proofs.

\subsection{Simply typed functions and datatypes}
A data declaration is used to introduce datatypes, including their name, type, and constructors along with their types. An example of this is the declaration of the boolean type:

\ExecuteMetaData[agda/latex/examples.tex]{bool}

This states that \texttt{Bool} is a data type with \texttt{true} and \texttt{false} as constructors. Functions over this datatype \texttt{Bool} can be defined using pattern matching, similar to Haskell. For instance we can define a function \texttt{not} for \texttt{Bool} as follows:

\ExecuteMetaData[agda/latex/examples.tex]{not}

We start by defining the type of not as a function from \texttt{Bool} to \texttt{Bool} and then we define the function by using pattern matching on the arguments. Agda checks that the pattern covers all cases and will not accept a function with missing patterns.

The natural numbers can be defined as the datatype:

\ExecuteMetaData[agda/latex/examples.tex]{nat}

A natural number is either zero or a successor of another natural number. This is called an \textit{inductively defined type}. We can define addition on the natural numbers with a recursive function.

\ExecuteMetaData[agda/latex/examples.tex]{add}

If a name contains underscores (\_) in the definition, the underscores represent where the arguments go. So in this case we get an infix operator and we write m + n instead of + m n, which would have been the case if the name was just +. We can set the precedence of an infix operator with an \texttt{infix} declaration:

\ExecuteMetaData[agda/latex/examples.tex]{infix}

Datatypes can also be parameterized by other types. For instance, the type of lists with elements of an arbitrary type is defined as follows:

\ExecuteMetaData[agda/latex/examples.tex]{list}


\subsection{Dependent types}

A dependent type is a type that depends on elements of another type. An example of a dependent type is a dependent function, where the result type depends on the value of the argument.  In Agda, this is denoted by (x : A) $\to$ B, representing functions that take an argument x of type A and produce a result of type B. A special case is when x itself is a type. For instance, we can define the identity function

\ExecuteMetaData[agda/latex/examples.tex]{id1}

This function takes a type argument A and an element x of type A, and returns x. In \Agda it is possible to use implicit arguments. To declare an argument as implicit we use curly braces instead of parenthesis when declaring the type argument. In particular, \{A : Set\} $\to$ B means the same thing as (A : Set) $\to$ B, but we don't need to provide the type explicitly, the type checker will try to infer it for us. We can now redefine the identity function above as follows:

\ExecuteMetaData[agda/latex/examples.tex]{id2}

Note that we no longer need to supply the type when the function is applied.


\subsection{Cubical Agda}
In this project we will be dealing with quotient types, and for that we need to use \CubicalAgda. This extends \Agda with features from Cubical Type Theory, which is needed when we deal with set quotients.\cite{AgdaDoc} We use only a small part of the \agdaCubical library, and any cubical theory is beyond this thesis.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Propositional calculus in Agda %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Propositional calculus in Agda}

Propositional calculus is a formal system that consists of a set of propositional constants, symbols, inference rules, and axioms. The symbols in propositional calculus represent logical connectives and parentheses, and are used to construct well-formed formulas that follow the syntax of the system. The inference rules of propositional calculus specify how these symbols can be used to derive additional statements from the initial assumptions, which are given by the axioms of the system.

The semantics of propositional calculus define how the expressions in the system correspond to truth values, typically "true" or "false". 


%% Formulas %%

\subsection{Formulas}

\begin{definition}[Language]\label{language}
    The language $\mathcal{L}$ of propositional calculus consists of
    \begin{itemize}
        \item proposition symbols: $p_0,p_1,\hdots,p_n$,
        \item logical connectives: $\wedge,\vee,\neg,\top,\bot$,
        \item auxiliary symbols: (, ).
    \end{itemize}
\end{definition}

Note that we have omitted the common logical connectives $\rightarrow$ and $\leftrightarrow$. This is becuase we can define them using other connectives, 
\begin{align*}
    \phi \rightarrow \psi &\myeq \neg \phi \vee \psi, \\
    \phi \leftrightarrow \psi &\myeq (\neg \phi \vee \psi) \wedge (\neg \psi \vee \phi),
\end{align*}making them reduntant. It is possible to choose an even smaller set of connectives \cite{vanDalen}, but we choose this as it is convenient.

\begin{definition}[Well formed formula]\label{wellformed}
    The set of well formed formulas is inductively defined as follows:
    \begin{itemize}
        \item any propositional constant $p_0,p_1,\hdots,p_n$ is a well formed formula,
        \item $\top$ and $\bot$ are well formed formulas,
        \item if $p$ is a well formed formula, then so is
        $$\neg p,$$
        \item if $p_i$ and $p_j$ are well formed formulas, then so are
            $$p_i \wedge p_j \quad \text{and} \quad p_i \vee p_j.$$
    \end{itemize}
    The formula $\top$ should be thought of as the proposition that is always true, and the formula $\bot$ interpreted as the proposition that is always false.
\end{definition}

We define well formed formulas in \Agda as a data type:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{form}


%% Context %%

\subsection{Context}

\begin{definition}[Context]
    A context is a set of sentences in the language $\mathcal{L}$. The set is defined inductively as follows:
    \begin{itemize}
        \item the empty set is a context
        \item if $\Gamma$ is a context, then $\Gamma \cup \{\phi\}$ is also a context, where $\phi$ a formula.
    \end{itemize}
\end{definition}

We will sometimes write $\Gamma, \phi$ instead of $\Gamma \cup \{\phi\}$, but they should both be thought of as the latter. In \Agda we will interpret $\Gamma \cup \{\phi\}$ as $\Gamma : \phi$. Lets define the data type for context in \Agda:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ctxt}
We also need a way to determine if a given formula is in a given context. 
\begin{definition}[Lookup]\label{lookup}
    For all contexts $\Gamma$ and all formulas $\phi$ and $\psi$
    \begin{itemize}
        \item $\phi \in \Gamma \cup \{\phi\}$,
        \item if $\phi \in \Gamma$, then $\phi \in \Gamma \cup \{\psi\}$.
    \end{itemize}
\end{definition}
We represent this as a data type in \Agda as follows:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{lookup}


%% Inference rules %%

\subsection{Inference rules}

For the inference rules we introduce a data type for provability:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{provability}
\hspace{40mm}$\vdots$
\vspace{4mm}

We will define the inference rules as inhabitants of this type. They will be on the form:
\begin{verbatim}
    rulename : { ... : ctxt} { ... : Formula}
            -> premise.1
            -> premise.2
                  :
            -> premise.n
            -> conclusion
\end{verbatim}


\subsubsection{Law of excluded middle}

\begin{definition}
    The law of excluded middle states that for every proposition, either the proposition or its negation is true.
\end{definition}

\begin{mathpar}
    \inferrule*[right=\scriptsize LEM]
        { }{\Gamma \vdash \phi \vee \neg \phi}
\end{mathpar}
In \Agda, we define this as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LEM}


\subsubsection{Logical connectives}

Rules for the logical connectives come in pairs of introduction and elimination rules, apart from $\top$, which has only an introduction rule, and $\bot$, which has only an elimination rule. These rules are based on \cite{vanDalen}.

The introduction rule for conjunction states that if there is a derivation of $\phi$ from $\Gamma$, and a derivation of $\psi$ from $\Gamma$, then we can conclude that there is a derivation of $\phi \wedge \psi$ from $\Gamma$.
\begin{mathpar}
    \inferrule*[Right=\scriptsize $\wedge$-I]
        {\Gamma \vdash \phi \\ \Gamma \vdash \psi }
        {\Gamma \vdash \phi \wedge \psi}
\end{mathpar}

The conjunction introduction rule is formalised in \Agda as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjI}

The accompanying elimination rules says that if there is some derivation concluding in $\phi \wedge \psi$ from $\Gamma$, then we can conclude that there is a derivation of $\phi$, and a derivation of $\psi$, from $\Gamma$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\wedge$-E$_1$]
        {\Gamma \vdash \phi \wedge \psi}
        {\Gamma \vdash \phi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\wedge$-E$_2$]
        {\Gamma \vdash \phi \wedge \psi}
        {\Gamma \vdash \psi}
\end{mathpar}

In \Agda, the conjunction eliminations rules are defined as follows:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjE1}
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjE2}

For disjunction we have two introductory rules. If we can deduce som fomula $\psi$ from $\Gamma$, then we can also deduce $\phi \vee \psi$ from $\Gamma$. In the same way, if we can deduce $\psi$ from $\Gamma$, then we can decuce $\phi \vee \psi$ from $\Gamma$ as well.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\vee$-I$_1$]
        {\Gamma \vdash \psi}
        {\Gamma \vdash \phi \vee \psi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\vee$-I$_2$]
        {\Gamma \vdash \phi}
        {\Gamma \vdash \phi \vee \psi}
\end{mathpar}

We formalise the two disjunction introduction rules in \Agda as follows:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjI1}
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjI2}

The eliminination rule for disjunction is a bit more involved. If $\phi \vee \psi$ can be deduced from $\Gamma$, then we can conclude $\Gamma \vdash \gamma$ if the extended contexts $\Gamma, \phi$ and $\Gamma, \psi$ both conclude in $\gamma$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\vee$-E]
        {\Gamma \vdash \phi \vee \psi \\ 
         \Gamma , \phi \vdash \gamma\\
         \Gamma , \psi \vdash \gamma}
        {\Gamma \vdash \gamma}
\end{mathpar}

The disjunction elimination rule in \Agda:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjE}

\begin{definition}
    A context $\Gamma$ is inconsistent if $\Gamma \vdash \phi$ and $\Gamma \vdash \neg \phi$, or equivalently $\Gamma \vdash \bot$. A context that is not inconsistent, is called consistent.
\end{definition}
The definition of inconsistency and the law of excluded middle together motivates the introduction and elimination rules for negation.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\neg$-I]
        {\Gamma, \phi \vdash \bot}
        {\Gamma \vdash \neg \phi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\neg$-E]
        {\Gamma \vdash \phi \\ \Gamma \vdash \neg \phi}
        {\Gamma \vdash \bot}
\end{mathpar}

In \Agda, we define the negation introduction rule as follows:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{negI}

The negation elimination rule is defined in \Agda as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{negE}

In Definition \ref{wellformed} we mentioned that $\top$ should be thought of as the proposition that is always true. In particular, it is trivially true in all contexts, and should be introduced with no premise.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\top$ I]
        { }{\Gamma \vdash \top}
\end{mathpar}

The $\top$ introduction rule in \Agda:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{topI}

If a context is inconsistent one can derive anything from it, which leads to the elimination rule for $\bot$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\bot$-E]
        {\Gamma \vdash \bot}
        {\Gamma \vdash \phi}
\end{mathpar}

The $\bot$ elimination rule is formalised in \Agda as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{botE}


\subsubsection{Structural rules}

Weakening is a structural rule that states that we can extend the hypothesis with additional members,
\begin{mathpar}
    \inferrule*[right=\scriptsize weakening]
        {\Gamma \vdash \phi}
        {\Gamma , \psi \vdash \phi}
\end{mathpar}

In \Agda, we define the rule of weakening as follows:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{weakening}

The structural rule of exchange allows us to permute the formulas in the context. However, we will be using a stricter version of exchange, where we can only permute the two formulas at the end of the context. This version is easier to implement and still satisfies our needs.
\begin{mathpar}
    \inferrule*[right=\scriptsize exchange]
        {\Gamma , \phi , \psi \vdash \gamma}
        {\Gamma , \psi , \phi \vdash \gamma}
\end{mathpar}

We define this exchange rule in \Agda as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{exchange}



%% Properties of propositional calc %%

\subsection{Properties of a propositional calculus}

We prove some properties of propositional calculus

\subsubsection{Equivalence relation}

\begin{definition}\label{eq-def}
    Let $S$ be the set of all the sentences of $\mathcal{L}$. Define the relation $\sim$ such that for $\phi,\psi \in S$,
    $$\phi \sim \psi \qquad \text{iff} \qquad \Gamma, \phi \vdash \psi \text{ and } \Gamma , \psi \vdash \phi$$
\end{definition}
This is represented in \Agda as a product type.
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq}

Before we prove that this is an equivalence relation we will prove a lemma.
\begin{lemma}\label{trans-lemma}
    Given $\Gamma, \phi \vdash \psi$ and $\Gamma, \psi \vdash \gamma$, it follows that $\Gamma, \phi \vdash \gamma$
\end{lemma}
\begin{proof}
    This is done through natural deduction
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\vee$-i$_2$]
                {\Gamma, \phi \vdash \psi}
                {\Gamma, \phi \vdash \psi \vee \gamma} \\
             \inferrule*[right=\scriptsize exchange]
                {\inferrule*[right=\scriptsize weakening]
                    {\Gamma, \psi \vdash \gamma}
                    {\Gamma, \psi, \phi \vdash \gamma}}
                {\Gamma, \phi, \psi \vdash \gamma} \\
             \inferrule*[right=\scriptsize axiom]
                {\gamma \in \Gamma , \phi, \gamma}
                {\Gamma , \phi, \gamma \vdash \gamma}}
            {\Gamma, \phi \vdash \gamma}
    \end{mathpar}

    The corresponding \Agda proof of the lemma:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{trans-lemma}
\end{proof}

\begin{theorem}\label{eq}
    The relation $\sim$ is an equivalence relation.
\end{theorem}

\begin{proof}
    Reflexivity follows from immediately from the axiom rule:
    \begin{mathpar}
        \inferrule*[right=\scriptsize axiom]
            {\phi \in \Gamma, \phi}
            {\Gamma ,\phi \vdash \phi}
    \end{mathpar}
    The corresponding \Agda proof for reflexivity:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{refl}
    It should be clear that $\Gamma, \phi \vdash \psi \text{ and } \Gamma , \psi \vdash \phi$ is just a pair of proofs, hence it does not matter in which order we give them. This means that the relation is also symmetric. We formalise this in \Agda as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{sym}
    For transitivity we need to prove that, given $\phi \sim \gamma$ and $\gamma \sim \psi$, it holds that $\phi \sim \psi$. By definition \ref{eq-def} we have the following:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, \phi \vdash \gamma$,
        \item $\Gamma, \gamma \vdash \phi$,
        \item $\Gamma, \gamma \vdash \psi$, and
        \item $\Gamma, \psi \vdash \gamma$.
    \end{enumerate}
    Now we can apply Lemma \ref{trans-lemma} on (i) and (iii) to conclude $\Gamma, \phi \vdash \psi$, and again to (iv) and (ii) to conclude $\Gamma, \psi \vdash \phi$. The proof in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{trans}
\end{proof}


\subsubsection{Commutativity}

\begin{proposition}
    $\phi \wedge \psi \sim \psi \wedge \phi$
\end{proposition}

\begin{proof} We need to show $\Gamma, \phi \wedge \psi \vdash \psi \wedge \phi$ and $\Gamma, \psi \wedge \phi \vdash \phi \wedge \psi$. To show $\Gamma, \phi \wedge \psi \vdash \psi \wedge \phi$, we have:
\begin{mathpar}
    \inferrule*[right=\scriptsize $\wedge$-I]
        {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
            {\inferrule*[right= \scriptsize axiom]
                {\phi \wedge \psi \in \Gamma, \phi \wedge \psi}
                {\Gamma,\phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma,\phi \wedge \psi \vdash \psi} \\
        \inferrule*[right=\scriptsize $\wedge$-E$_1$]
            {\inferrule*[right= \scriptsize axiom]
                {\phi \wedge \psi \in \Gamma, \phi \wedge \psi}
                {\Gamma,\phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma,\phi \wedge \psi \vdash \phi}}
        {\Gamma \vdash \psi \wedge \phi}
\end{mathpar}

The other proof is identical up to renaming of the formulas, so we omitt it. Together they prove $\phi \wedge \psi \sim \psi \wedge \phi$. This corresponds to the \Agda proof:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-comm}
Thus, we have shown that the two statements are equivalent in \Agda:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{comm-eq-conj}
\end{proof}

\begin{proposition}
    $\phi \vee \psi \sim \psi \vee \phi$
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$ and $\Gamma, \psi \vee \phi \vdash \phi \vee \psi$. Up to renaming of the formulas, the proofs are identical, so it suffices to show $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$. Let $\Gamma' = \Gamma \cup \{\phi \vee \psi\}$, then by natural deduction we can show $\Gamma' \vdash \psi \vee \phi$.
    \begin{mathpar}
        \mprset{sep=0.5em}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee \psi \in \Gamma'}
                {\Gamma' \vdash \phi \vee \psi} \\ 
             \inferrule*[right=\scriptsize$\vee$-I$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma', \phi}
                    {\Gamma', \phi \vdash \phi}}
                {\Gamma',\phi \vdash \psi \vee \phi} \\
             \inferrule*[right=\scriptsize$\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\psi \in \Gamma',\psi}
                    {\Gamma', \psi \vdash \psi}}
                {\Gamma',\psi \vdash \psi \vee \phi}}
            {\Gamma' \vdash \psi \vee \phi}
    \end{mathpar}

    Therefore, we have shown $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$ and $\Gamma, \psi \vee \phi \vdash \phi \vee \psi$. Hence, $\phi \vee \psi \sim \psi \vee \phi$. In \Agda we can write the corresponding proof as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-comm}
    Then, we show that the equivalence of the statements hold in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{comm-eq-disj}

\end{proof}


\subsubsection{Associativity}

\begin{proposition}
    $\phi \wedge (\psi \wedge \gamma) \sim (\phi \wedge \psi) \wedge \gamma$
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \wedge (\psi \wedge \gamma) \vdash (\phi \wedge \psi) \wedge \gamma$ and $\Gamma, (\phi \wedge \psi) \wedge \gamma \vdash \phi \wedge (\psi \wedge \gamma)$. Using natural deduction, we can prove both statements. Since the two proofs are very similar, we will only present the first one. However, the complete deduction tree is too large to include here, but can be found in \ref{A1} for reference. In \Agda, the corresponding proof of the first entailment is:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-ass1}
    The proof of the second entailment in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-ass2}
    Therefore, we can conclude that the following equivalence holds:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ass-eq-conj}
\end{proof}

\begin{proposition}
    $\phi \vee (\psi \vee \gamma) \sim (\phi \vee \psi) \vee \gamma$
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \vee (\psi \vee \gamma) \vdash (\phi \vee \psi) \vee \gamma$ and $\Gamma, (\phi \vee \psi) \vee \gamma \vdash \phi \wedge (\psi \vee \gamma)$ Proof is done through natural deduction. The proofs are very similar and we have therefore opted to omitt the second proof, and we refer the reader to \ref{A2} for details on the first one. In \Agda we write the proofs as follows, the first entailment:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-ass1}
    The proof of the second entailment in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-ass2}
    With these two results we have proven $\phi \vee (\psi \vee \gamma) \sim (\phi \vee \psi) \vee \gamma$. In \Agda, the equivalence is shown as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ass-eq-disj}
\end{proof}




\subsubsection{Distributivity}

\begin{proposition}
    $\phi \wedge (\psi \vee \gamma) \sim (\phi \wedge \psi) \vee (\phi \wedge \gamma)$
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \wedge (\psi \vee \gamma) \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)$ and $\Gamma, (\phi \wedge \psi) \vee (\phi \wedge \gamma) \vdash \phi \wedge (\psi \vee \gamma)$. For the natural deductions, please refer to \ref{A3} and \ref{A4}, together they show $\phi \wedge (\psi \vee \gamma) \sim (\phi \wedge \psi) \vee (\phi \wedge \gamma)$. The corresponding Agda proof of the first entailment is:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-dist1}
    In \Agda, the second entailment is formalised as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-dist2}
    We can combine these two proofs to show equivalence in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{dist-eq-conj}
\end{proof}

\begin{proposition}
    $\phi \vee (\psi \wedge \gamma) \sim (\phi \vee \psi) \wedge (\phi \vee \gamma)$
\end{proposition}

\begin{proof}
    We aim to show $\Gamma, \phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$ and $\Gamma, (\phi \vee \psi) \wedge (\phi \vee \gamma) \vdash \phi \vee (\psi \wedge \gamma)$. For the deduction details please refer to \ref{A5} and \ref{A6}. The following is the proof of the first entailment in \Agda:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-dist1}
    The second entailment is shown in \Agda as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-dist2}
    We can thus conclude that the two statements are equivalent:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{dist-eq-disj}
\end{proof}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%   Lindenbaum Tarski algebra    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Lindenbaum-Tarski algebra in Cubical Agda}

\begin{definition}[Lindenbaum-Tarski algebra]
    The Lindenbaum-Tarski algebra is the quotient algebra obtained by factoring the algebra of formulas by the equivalence relation $\sim$.
\end{definition}
We use the definiton of a set quotient from the \agdaCubical library to define the Lindenbaum-Tarski algebra:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-def}


\subsection{Binary operations and propositional constants}

To define operations on the Lindenbaum-Tarski algebra, we utilize the already existing functions \texttt{setQuotBinOp} and \texttt{setQuotUnaryOp} from the \agdaCubical library, which operate on set quotients. Our first step is to define conjunction in the Lindenbaum-Tarski algebra, using \texttt{setQuotBinOp} to create a binary operation. In order to do this, we must provide proof that the underlying operation - conjunction on formulas in the propositional calculus - respects the equivalence relation $\sim$. We will establish this as a lemma.

\begin{lemma}
    For all formulas $a,a',b,b'$, if $a\sim a'$ and $b \sim b'$, then $a\wedge b \sim a' \wedge b'$.
\end{lemma}

\begin{proof} By definition of the relation $\sim$ we have:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, a \vdash a'$
        \item $\Gamma, a' \vdash a$
        \item $\Gamma, b \vdash b'$
        \item $\Gamma, b' \vdash b$
    \end{enumerate}
    We want to show that then $\Gamma, a \wedge b \vdash a' \wedge b'$ and $\Gamma, a' \wedge b' \vdash a \wedge b$. First, we show that $\Gamma, a \wedge b \vdash a' \wedge b'$. By the axiom rule and conjunction elimination, we have:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-E$_1$]
            {\inferrule*[right=\scriptsize axiom]
                {a \wedge b \in \Gamma, a \wedge b }
                {\Gamma, a \wedge b \vdash a \wedge b}}
            {\Gamma, a \wedge b \vdash a}
        \qquad
        \inferrule*[right=\scriptsize $\wedge$-E$_2$]
            {\inferrule*[right=\scriptsize axiom]
                    {a \wedge b \in \Gamma, a \wedge b }
                    {\Gamma, a \wedge b \vdash a \wedge b}}
            {\Gamma, a \wedge b \vdash b}
    \end{mathpar}
    Now we can use Lemma \ref{trans-lemma} on $\Gamma, a\wedge b \vdash a$ and (i) to get $\Gamma, a \wedge b \vdash a'$, and similarly on $\Gamma, a \wedge b \vdash b$ and (iii) to get $\Gamma, a\wedge b \vdash b'$. Then, by conjunction introduction we get the desired result:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\Gamma, a \wedge b \vdash a' \\ \Gamma, a \wedge b \vdash b'}
            {\Gamma, a \wedge b \vdash a' \wedge b'}
    \end{mathpar}
    Proving $\Gamma, a' \wedge b' \vdash a \wedge b$ is identical to the first proof, so we omit it here. The full proof in \Agda:

    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-conj}
\end{proof}

Now we can define conjunction on Lindenbaum-Tarski algebra in \Agda as follows:
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-conj}

The \texttt{setQuotBinOp} function takes four arguments: two proofs of reflexivity, the logical conjunction operator $\wedge/$, and a proof that the operator respects the equivalence relation. In this case, the reflexivity proofs are identical since A and B are of the same type. The resulting function takes two elements A and B in the Lindenbaum-Tarski algebra and returns their conjunction.

When defining disjunction we need to prove a similar lemma as for the conjunction. We must provide proof that the disjunction operator respects the equivalence relation $\sim$.

\begin{lemma}
    For all formulas $a,a',b,b'$, if $a\sim a'$ and $b \sim b'$, then $a \vee b \sim a' \vee b'$.
\end{lemma}

\begin{proof} By defintion of the relation $\sim$, we have:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, a \vdash a'$
        \item $\Gamma, a' \vdash a$
        \item $\Gamma, b \vdash b'$
        \item $\Gamma, b' \vdash b$
    \end{enumerate}
    We want to show that then $\Gamma, a \vee b \vdash a' \vee b'$ and $\Gamma, a' \vee b' \vdash a \vee b$. By the axiom rule and disjunction introduction, we have:
    \begin{mathpar}
        \inferrule*[right=\scriptsize axiom]
            {a \vee b \in \Gamma, a \vee b}
            {\Gamma, a \vee b \vdash a \vee b}
    \end{mathpar}
    Using (i) we can deduce:
    \begin{mathpar}
        \inferrule*[right=\scriptsize exchange]
            {\inferrule*[right=\scriptsize weakening]
                {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                    {\Gamma, a \vdash a'}
                    {\Gamma, a \vdash a' \vee b'}}
                {\Gamma, a, a\vee b \vdash a' \vee b'}}
            {\Gamma,a\vee b, a \vdash a' \vee b'}
    \end{mathpar}
    Similarly, using (iii) we can deduce:
    \begin{mathpar}
        \inferrule*[right=\scriptsize exchange]
            {\inferrule*[right=\scriptsize weakening]
                {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                    {\Gamma, b \vdash b'}
                    {\Gamma, b \vdash a' \vee b'}}
                {\Gamma, b, a\vee b \vdash a' \vee b'}}
            {\Gamma,a\vee b, b \vdash a' \vee b'}
    \end{mathpar}
    Then by using conjunction elimination we get the desired result:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\Gamma, a \vee b \vdash a \vee b \\
            \Gamma,a\vee b, a \vdash a' \vee b' \\
            \Gamma,a\vee b, b \vdash a' \vee b'}
            {\Gamma, a \vee b \vdash a' \vee b'}
    \end{mathpar}
    Proving $\Gamma, a' \vee b' \vdash a \vee b$ is identical to the first proof, so we omit it here. In \Agda the full proof is written as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-disj}
\end{proof}

Using \texttt{setQuotBinOp} we can now, with this lemma, define disjunction on Lindenbaum-Tarski algebra in \Agda:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-disj}

Here, setQuotBinOp takes four arguments: two proofs of reflexivity ($\sim$-refl) for the equivalence relation, the logical disjunction operator ($\vee/$), and a proof that the operator respects the equivalence relation ($\sim$-respects-$\vee$). The function expects two reflexivity proofs, one for each of the two elements we are combining with the operator. In this case, both elements are of the same type, hence the reflexivity proofs are the same. The resulting function $\vee/$ takes two elements A and B in the Lindenbaum-Tarski algebra and returns their disjunction.

Next, in order to define negation on the Lindenbaum-Tarski algebra, we need to show that the underlying operation of negation in the propositional calculus respects the equivalence relation $\sim$. This can be achieved by proving another lemma. 

\begin{lemma}
    For all formulas $a,a'$, if $a\sim a'$, then $ \neg a \sim \neg a'$.
\end{lemma}

\begin{proof}
    From the definition of $\sim$ we are given $\Gamma, a \vdash a'$ and $\Gamma, a' \vdash a$. We aim to show that $\Gamma, \neg a \vdash \neg a'$ and $\Gamma, \neg a' \vdash \neg a$. The two proofs are identical so we will only prove $\Gamma, \neg a \vdash \neg a'$. This is done through natural deduction:

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\neg$-I]
            {\inferrule*[right=\scriptsize $\neg$-E]
                {\inferrule*[right=\scriptsize exchange]
                    {\inferrule*[right= \scriptsize weakening]
                        {\Gamma, a' \vdash a}
                        {\Gamma, a', \neg a\vdash a}}
                    {\Gamma, \neg a, a' \vdash a} \\
                \inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {\neg a \in \Gamma, \neg a}
                        {\Gamma, \neg a \vdash \neg a}}
                    {\Gamma,\neg a , a' \vdash \neg a}}
                {\Gamma, \neg a, a' \vdash \bot}}
            {\Gamma,\neg a \vdash \neg a'}
    \end{mathpar}
    In \Agda, we define the full proof as follows:
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-neg}
\end{proof}

This lemma shows that the negation operation on the propositional calculus respects the equivalence relation $\sim$, and allows us to define negation on the Lindenbaum-Tarski algebra in \Agda:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-neg}

The \texttt{setQuotUnaryOp} function takes two arguments: a unary operator ($\neg/$) and a proof that the operator respects the equivalence relation ($\sim$-respects-$\neg$). The resulting function takes one element A in the Lindenbaum-Tarski algebra and returns its negation.

To construct the equivalence classes for propositional constants, we can use the constructor from the definition of a set quotient in the already existing definition of set quotient in \CubicalAgda:

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-top}
\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-bot}


\subsection{Proof that the Lindenbaum Tarski algebra is Boolean}

\begin{definition}[Lattice]
    A lattice is a non-empty partially ordered set $\langle L, \leq \rangle$ where every $x,y \in L$ has a supremum $x\vee y$, also called join, and an infimum $x \wedge y$, also called meet. It follows from this definition that
    $$x \leq y \quad \text{iff} \quad x \vee y = y \quad \text{iff} \quad x \wedge y = x.$$
\end{definition}

\begin{definition}
    A lattice $L$ is distributive if for all $x,y,z \in L$,
    \begin{align*}
        x \wedge (y \vee z) = (x \wedge y) \vee (x \wedge z), \\
        x \vee (y \wedge z) = (x \vee y) \wedge (x \vee z).
    \end{align*}
\end{definition}

\begin{definition}
    A lattice $L$ is complemented if there exist both least and greatest elements in $L$, denoted $\bot$ and $\top$, and for every $x\in L$ there exists $y\in L$ such that
    $$x \vee y = \top \quad \text{and} \quad x\wedge y = \bot.$$
\end{definition}

\begin{definition}
    A boolean algebra is a complemented distributive lattice.
\end{definition}

\begin{theorem}
    The Lindenbaum-Tarski algebra is a boolean algebra.
\end{theorem}

\begin{proof}
    
\end{proof}

\subsection{Soundness}
















% References
\newpage
\bibliography{refs}

% Appendices
\newpage
\begin{appendices}

    \section{Derivations}
    
    \begin{landscape}

        \subsection{Derivation of $\Gamma, \phi \wedge (\psi \wedge \gamma)\vdash (\phi \wedge \psi) \wedge \gamma$}\label{A1}
        
        \begin{mathpar}
            \inferrule*[right=\scriptsize $\wedge$-I]
                {\mathcal{D}_1 \\ \mathcal{D}_2}
                {\Gamma, \phi \wedge (\psi \wedge \gamma)\vdash (\phi \wedge \psi) \wedge \gamma}
        \end{mathpar}

        \begin{mathpar}
            \inferrule*[right=\scriptsize $\wedge$-I, lab=\large$\mathcal{D}_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                    {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                       {\inferrule*[right=\scriptsize axiom]
                            {\phi \wedge (\psi \wedge \gamma) \in \Gamma,\phi \wedge (\psi \wedge \gamma)}
                            {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \phi \wedge (\psi \wedge \gamma)}}
                        {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \psi \wedge \gamma}}
                    {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \psi} \\
                 \inferrule*[right=\scriptsize $\wedge$-E$_1$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \wedge (\psi \wedge \gamma) \in \Gamma'}
                        {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \phi \wedge (\psi \wedge \gamma)}}
                    {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \phi}}
                {\Gamma ,\phi \wedge (\psi \wedge \gamma)\vdash \phi \wedge \psi}
        \end{mathpar}

        \begin{mathpar}
            \inferrule*[right=\scriptsize $\wedge$-E$_2$, lab= \large $\mathcal{D}_2$]
                    {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                        {\inferrule*[right=\scriptsize axiom]
                            {\phi \wedge (\psi \wedge \gamma) \in \Gamma'}
                            {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \phi \wedge (\psi \wedge \gamma)}}
                        {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \psi \wedge \gamma}}
                    {\Gamma,\phi \wedge (\psi \wedge \gamma) \vdash \gamma}
        \end{mathpar}

    \newpage
    \subsection{Derivation of $\Gamma,\phi \vee (\psi \vee \gamma) \vdash (\phi \vee \psi) \vee \gamma$}\label{A2}

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee (\psi \vee \gamma) \in \Gamma,\phi \vee (\psi \vee \gamma)}
                {\Gamma,\phi \vee (\psi \vee \gamma) \vdash \phi \vee (\psi \vee \gamma)} \\
            \inferrule*[right=\scriptsize$\vee$-I$_2$]
                {\inferrule*[right=\scriptsize$\vee$-I$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \in \Gamma,\phi \vee (\psi \vee \gamma),\phi}
                        {\Gamma,\phi \vee (\psi \vee \gamma), \phi \vdash \phi}}
                    {\Gamma,\phi \vee (\psi \vee \gamma), \phi \vdash \phi \vee \psi}}
                {\Gamma,\phi \vee (\psi \vee \gamma), \phi \vdash (\phi \vee \psi) \vee \gamma} \\
             \inferrule*[]
                {}
                {\mathcal{D} \\\\ \Gamma,\phi \vee (\psi \vee \gamma), (\psi \vee \gamma) \vdash \psi \vee \gamma}}
            {\Gamma,\phi \vee (\psi \vee \gamma) \vdash (\phi \vee \psi) \vee \gamma}
    \end{mathpar}

    \begin{mathpar}
        \mprset{sep=1em}
        \inferrule*[right=\scriptsize$\vee$-E, lab=\large $\mathcal{D}$]
            {\inferrule*[right=\scriptsize axiom]
                {\psi \vee \gamma \in \Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma}
                {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma\vdash \psi \vee \gamma} \\
                \inferrule*[]{}{\mathcal{D}' \\\\ \Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\psi \vdash (\phi \vee \psi) \vee \gamma} \\
             \inferrule*[right=\scriptsize$\vee$-I$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\gamma \in \Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\gamma}
                    {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\gamma \vdash \gamma}}
                {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\gamma \vdash (\phi \vee \psi) \vee \gamma}}
            {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma\vdash (\phi \vee \psi) \vee \gamma}
    \end{mathpar}

    \begin{mathpar}
        \inferrule*[right=\scriptsize$\vee$-I$_2$, lab=\large $\mathcal{D}'$]
                {\inferrule*[right=\scriptsize$\vee$-I$_1$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \in \Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma, \psi}
                        {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\psi \vdash \psi}}
                    {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\psi \vdash \phi \vee \psi}}
                {\Gamma,\phi \vee (\psi \vee \gamma), \psi \vee \gamma,\psi \vdash (\phi \vee \psi) \vee \gamma} 
    \end{mathpar}


    \subsection{Derivation of $\Gamma,\phi \wedge (\psi \vee \gamma) \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)$}\label{A3}
    \begin{mathpar}
        \mprset{sep=1em}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge (\psi \vee \gamma) \in \Gamma,\phi \wedge (\psi \vee \gamma)}
                    {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \phi \wedge (\psi \vee \gamma)}}
                {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \psi \vee \gamma} \\ 
             \inferrule*[]
                {}
                {\mathcal{D}_1 \\\\ \Gamma,\phi \wedge (\psi \vee \gamma),\psi \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}\\ 
                \inferrule*[]
                {}
                {\mathcal{D}_2 \\\\ \Gamma,\phi \wedge (\psi \vee \gamma),\gamma \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}}
            {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_1$, lab=\large $\mathcal{D}_1$]
            {\inferrule*[right=\scriptsize $\wedge$-I]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                        {\inferrule*[right=\scriptsize axiom]
                            {\phi \wedge (\psi \vee \gamma) \in \Gamma,\phi \wedge (\psi \vee \gamma)}
                            {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \phi \wedge (\psi \vee \gamma)}}
                        {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \phi}}
                    {\Gamma,\phi \wedge (\psi \vee \gamma),\psi \vdash \phi} \\
                 \inferrule*[right=\scriptsize axiom]
                    {\psi \in \Gamma,\phi \wedge (\psi \vee \gamma),\psi}
                    {\Gamma,\phi \wedge (\psi \vee \gamma),\psi \vdash \psi}}
                {\Gamma,\phi \wedge (\psi \vee \gamma),\psi \vdash \phi \wedge \psi}}
            {\Gamma,\phi \wedge (\psi \vee \gamma),\psi \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_1$, lab=\large $\mathcal{D}_2$]
                {\inferrule*[right=\scriptsize $\wedge$-I]
                    {\inferrule*[right=\scriptsize weakening]
                        {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                            {\inferrule*[right=\scriptsize axiom]
                                {\phi \wedge (\psi \vee \gamma)\in\Gamma'}
                                {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \phi \wedge (\psi \vee \gamma)}}
                            {\Gamma,\phi \wedge (\psi \vee \gamma) \vdash \phi}}
                        {\Gamma,\phi \wedge (\psi \vee \gamma),\gamma \vdash \phi} \\
                     \inferrule*[right=\scriptsize axiom]
                        {\gamma \in \Gamma,\phi \wedge (\psi \vee \gamma),\gamma}
                        {\Gamma,\phi \wedge (\psi \vee \gamma),\gamma \vdash \gamma}}
                    {\Gamma,\phi \wedge (\psi \vee \gamma),\gamma \vdash \phi \wedge \gamma}}
                {\Gamma,\phi \wedge (\psi \vee \gamma),\gamma \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}


    \subsection{Derivation of $\Gamma,(\phi \wedge \psi) \vee (\phi \wedge \gamma) \vdash \phi \wedge (\psi \vee \gamma)$}\label{A4}
    Denote $\Gamma' = \Gamma \cup \{(\phi \wedge \psi) \vee (\phi \wedge \gamma)\}$

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\inferrule*[]{}{\mathcal{D}_1 \\\\ \Gamma' \vdash \phi} \\
             \inferrule*[]{}{\mathcal{D}_2 \\\\ \Gamma' \vdash \psi \vee \gamma}}
            {\Gamma' \vdash \phi \wedge (\psi \vee \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E,lab=\large $\mathcal{D}_1$]
            {\inferrule*[right=\scriptsize axiom]
                {(\phi \wedge \psi) \vee (\phi \wedge \gamma)\in \Gamma'}
                {\Gamma' \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)} \\
             \inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \psi \in \Gamma', \phi \wedge \psi}
                    {\Gamma', \phi \wedge \psi \vdash \phi \wedge \psi}}
                {\Gamma',\phi \wedge \psi \vdash \phi} \\
            \inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \gamma \in \Gamma', \phi \wedge \gamma}
                    {\Gamma', \phi \wedge \gamma \vdash \phi \wedge \gamma}}
                {\Gamma',\phi \wedge \gamma \vdash \phi}}
            {\Gamma' \vdash \phi}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E, lab=\large $\mathcal{D}_2$]
            {\inferrule*[right=\scriptsize axiom]
                {(\phi \wedge \psi) \vee (\phi \wedge \gamma)\in \Gamma'}
                {\Gamma' \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)} \\
             \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \wedge \psi \in \Gamma', \phi \wedge \psi}
                        {\Gamma', \phi \wedge \psi \vdash \phi \wedge \psi}}
                    {\Gamma',\phi \wedge \psi \vdash \psi}}
                {\Gamma',\phi \wedge \psi \vdash \psi \vee \gamma}
             \inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \wedge \gamma \in \Gamma', \phi \wedge \gamma}
                        {\Gamma', \phi \wedge \gamma \vdash \phi \wedge \gamma}}
                    {\Gamma',\phi \wedge \gamma \vdash \gamma}}
                {\Gamma',\phi \wedge \gamma \vdash \psi \vee \gamma}}
            {\Gamma' \vdash \psi \vee \gamma}
    \end{mathpar}


    \subsection{Derivation of $\Gamma,\phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$}\label{A5}

    \begin{mathpar}
        \inferrule*[right=\scriptsize$\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee (\psi \wedge \gamma) \in \Gamma,\phi \vee (\psi \wedge \gamma)}
                {\Gamma,\phi \vee (\psi \wedge \gamma) \vdash \phi \vee (\psi \wedge \gamma)} \\
             \inferrule*[] {} {\mathcal{D}_1 \\\\ \Gamma,\phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma) }\\
             \inferrule*[]{}{\mathcal{D}_2 \\\\ \Gamma,\phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
            {\Gamma,\phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize$\wedge$-I, lab=\large $\mathcal{D}_1$]
            {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma,\phi \vee (\psi \wedge \gamma),\phi}
                    {\Gamma,\phi \vee (\psi \wedge \gamma),\phi \vdash \phi}}
                {\Gamma,\phi \vee (\psi \wedge \gamma),\phi \vdash \phi \vee \psi} \\
             \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma,\phi \vee (\psi \wedge \gamma),\phi}
                    {\Gamma,\phi \vee (\psi \wedge \gamma), \phi \vdash \phi}}
                {\Gamma,\phi \vee (\psi \wedge \gamma),\phi \vdash (\phi \vee \gamma)}}
            {\Gamma,\phi \vee (\psi \wedge \gamma),\phi \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I, lab=\large $\mathcal{D}_2$]
            {\inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \wedge \gamma \in \Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma}
                        {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash \psi \wedge \gamma}}
                    {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash \psi}}
                {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash (\phi \vee \psi)} \\
             \inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \wedge \gamma \in \Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma}
                        {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash \psi \wedge \gamma}}
                    {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash \gamma}}
                {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash (\phi \vee \gamma)}}
            {\Gamma,\phi \vee (\psi \wedge \gamma),\psi \wedge \gamma \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    
    \newpage
    \subsection{Derivation of $\Gamma,(\phi \vee \psi) \wedge (\phi \vee \gamma) \vdash \phi \vee (\psi \wedge \gamma)$}\label{A6}

    Denote $\Gamma' = \Gamma \cup \{(\phi \vee \psi) \wedge (\phi \vee \gamma)\}$

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {(\phi \vee \psi) \wedge (\phi \vee \gamma) \in \Gamma' }
                    {\Gamma' \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                {\Gamma' \vdash \phi \vee \psi} \\
             \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma',\phi}
                    {\Gamma',\phi \vdash \phi}}
                {\Gamma',\phi \vdash \phi \vee (\psi \wedge \gamma)} \\
             \inferrule*[]{}{\mathcal{D} \\\\ \Gamma',\psi \vdash \phi \vee (\psi \wedge \gamma)}}
            {\Gamma',\phi \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E, lab=\large $\mathcal{D}$]
            {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {(\phi \vee \psi) \wedge (\phi \vee \gamma)\in \Gamma'}
                        {\Gamma' \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                    {\Gamma',\psi \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                {\Gamma',\psi \vdash \phi \vee \gamma} \\
             \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma',\psi,\phi}    
                    {\Gamma',\psi,\phi \vdash \phi}}
                {\Gamma',\psi,\phi\vdash \phi \vee (\psi \wedge \gamma)} \\
             \inferrule*[]{}{\mathcal{D}'}}
            {\Gamma',\psi,\phi \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_1$, lab=\large $\mathcal{D}'$]
            {\inferrule*[right=\scriptsize $\wedge$-I]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \in \Gamma',\psi}
                        {\Gamma',\psi \vdash \psi}}
                    {\Gamma',\psi,\gamma \vdash \psi}
                     \\
                \inferrule*[right=\scriptsize axiom]
                    {\gamma \in \Gamma',\psi,\gamma}
                    {\Gamma',\psi,\gamma \vdash \gamma}}
                {\Gamma',\psi,\gamma \vdash \psi \wedge \gamma}}
            {\Gamma',\psi,\gamma \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}




    \end{landscape}

    \section{LindenbaumTarski.agda}\label{code}
    %\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{all}
\end{appendices}

\end{document}