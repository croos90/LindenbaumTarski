\documentclass[titlepage]{article}

\usepackage{textcomp}
\usepackage{xspace}
\usepackage{url}
\usepackage{multirow}
\usepackage{hhline}
\usepackage{pifont}
\usepackage{amsmath, amsfonts , amsthm , amssymb , mathtools , bbold , float}
\usepackage{tikz}
\usetikzlibrary{arrows,matrix,decorations.pathmorphing,
  decorations.markings, calc, backgrounds}
\usepackage{mathpartir}
\usepackage{microtype}
\usepackage{hyperref}
\usepackage{url}
\usepackage{lscape}
\DisableLigatures[-]{family=tt*}
\usepackage{enumitem}
\usepackage[titletoc]{appendix}
\usepackage{xcolor, colortbl}

\newcommand\myeq{\mathrel{\overset{\makebox[0pt]{\mbox{\normalfont\tiny\sffamily def}}}{=}}}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}{Definition}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{proposition}{Proposition}
\newtheorem{agdadef}{Agda definition}

\input{macros}

\bibliographystyle{plainurl}


\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%            Abstract            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{abstract}
    This thesis focuses on formalizing the Lindenbaum-Tarski algebra for propositional logic in Cubical Agda, an area of mathematical logic that involves the quotient of the algebra of formulas by an equivalence relation defined in terms of provability. To achieve this goal, we first formalize classical propositional logic and its properties in Agda, and define the equivalence relation on formulas. We then proceed to define the Lindenbaum-Tarski algebra in Cubical Agda and prove its soundness and properties. In particular, we show that the algebra is a complemented distributive lattice, which implies that it is Boolean.
\end{abstract}

\tableofcontents
\thispagestyle{empty}
\newpage
\setcounter{page}{1}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%          Introduction          %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Introduction}

\Agda is a powerful dependently typed programming language that is based on Martin LÃ¶f's type theory\cite{Martin-Lof1984-MARITT-18}. Its strong typing and dependent types make it an ideal proof assistant for formalizing mathematical proofs\cite{AgdaDoc}. Formalizing mathematics in \Agda provides several benefits, such as creating machine-checkable proofs that ensure the correctness of a proof and detecting errors or gaps in reasoning that may not be apparent through traditional mathematical proofs. This deepens our understanding and verification of mathematical concepts and proofs. In Section 2, we will provide a brief introduction to \Agda and type theory.

In algebraic logic different logics are examined by connecting them to classes of algebras, logical matrices, and other algebraic structures. We can then investigate how the properties of these logics are related to the properties of the associated algebras or algebraic structures. The goal is to enhance our understanding of the logic by studying its associated algebras\cite{sep-logic-algebraic-propositional}.
The Lindenbaum-Tarski algebra is a concept of algebraic logic that involves quotienting the algebra of formulas by an equivalence relation defined in terms of provability\cite{wikipedia}. That is, the Lindenbaum-Tarski algebra of a logical theory $T$ consists of the equivalence classes of formulas in $T$. In this thesis, we aim to formalize the Lindenbaum-Tarski algebra in \CubicalAgda, which is a variant of \Agda that is extended with cubical type theory and has native support for quotient types.

The first step towards our goal is to formalize classical propositional logic and its properties in \Agda, defining the equivalence relation on formulas such that two formulas are equivalent if and only if they are provably equivalent in the context. This will be the focus of Section 3.

In Section 4, we will move on to define the Lindenbaum-Tarski algebra in Cubical Agda, proving soundness and some properties of the algebra. Our primary goal will be to formalize that the algebra is a Boolean algebra. We will use the fact that a Boolean algebra can be viewed as a complemented distributive lattice to formalize that the Lindenbaum-Tarski algebra is Boolean.

This formalization will provide the \agdaCubical library with a formalization of Lindenbaum-Tarski algebra, that is currently missing, and allow for the verification of mathematical proofs related to Lindenbaum-Tarski algebra in the future.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%    The Agda proof assistant    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Agda proof assistant}

Tha \Agda programming language allows us to encode mathematical propositions as types and their proofs as programs, ensuring the correctness and consistency of our reasoning. The language's strong type system also provides powerful tools for automatically verifying the correctness of proofs.\cite{BoveDybjer2008}

Furthermore, Agda is a total language, which means that any program $e$ of type $T$ will always terminate with a value in $T$. This guarantees the absence of runtime errors and prevents the creation of non-terminating programs, unless explicitly requested by the programmer\cite{AgdaDoc}.


\subsection{Propositions as types}

Propositions as types is a concept that links logical propositions with types in a programming language. It is based on the idea that a proof of a proposition is analogous to a program that satisfies the type associated with the proposition.

In this context, the introduction and elimination rules for logical connectives can be viewed as operations that construct and destruct values of the corresponding types. For instance, the introduction rule for conjunction states that given proofs of two propositions, we can construct a proof of their conjunction by pairing the two proofs together. This can be seen as a function that takes two values of the corresponding types and returns a pair.

Conversely, the elimination rule for conjunction says that given a proof of a conjunction, we can extract proofs of its two conjuncts by projecting the pair onto each component. This can be viewed as functions that takes a pair and returns the values of the corresponding types.

This is similar to the concept of product types in programming languages, where a product type represents a pair of values. The introduction form of a product type is a tuple, and the elimination forms are projection functions that extract the individual components of the tuple. Table 1 summarizes the correspondence between propositions and types and between proofs and programs.

\begin{table}[h!]
    \centering
    \begin{tabular}{c | c}
        Prop & Type \\
        \hline
        $\top$ & unit \\
        $\bot$ & void \\
        $\phi_1 \wedge \phi_2$ & $\tau_1 \times \tau_2$ \\
        $\phi_1 \supset \phi_2$ & $\tau_1 \to \tau_2$ \\
        $\phi_1 \vee \phi_2$ & $\tau_1 + \tau_2$
    \end{tabular}
    \caption{Propositions as types}
\end{table}

This allows us to reason about logical propositions in terms of programming language types, and to use the tools and techniques of programming languages like \Agda to reason about logical proofs.


\subsection{Simply typed functions and data types}

A data declaration introduces a new datatype with its name, type, and constructors, along with their types. For instance, the Boolean type can be defined in \Agda as follows:

\ExecuteMetaData[agda/latex/examples.tex]{bool}
Here, \texttt{Bool} is the name of the datatype, and \texttt{true} and \texttt{false} are its constructors. Functions over the datatype \texttt{Bool} can be defined using pattern matching, similar to \Haskell. For example, the \texttt{not} function can be defined as follows:

\ExecuteMetaData[agda/latex/examples.tex]{not}
We start by defining the type of \texttt{not} as a function from \texttt{Bool} to \texttt{Bool} and then we define the function by pattern matching on the arguments. \Agda ensures that the pattern covers all cases and will not accept a function with missing patterns.

The natural numbers can be defined as an inductively defined type, as follows:

\ExecuteMetaData[agda/latex/examples.tex]{nat}
Here, \texttt{zero} represents the natural number $0$, and \texttt{suc} $n$ represents the successor of the natural number $n$. We can define addition on natural numbers using a recursive function, as follows:

\ExecuteMetaData[agda/latex/examples.tex]{add}

If a name contains underscores ('\_') in the definition, they represent where the arguments go. So in this case we get an infix operator, and we write 'm + n' instead of '+ m n', which would have been the case if the name was just '+'. We can set the precedence of an infix operator with an \texttt{infix} declaration:

\ExecuteMetaData[agda/latex/examples.tex]{infix}

Data types can also be parameterized by other types. For instance, the type of lists with elements of an arbitrary type is defined as follows:

\ExecuteMetaData[agda/latex/examples.tex]{list}
This declares the datatype \texttt{List} as a function of a type $A$ that maps to the type \texttt{List} $A$. It has two constructors, '[ ]' for an empty list and '::' for a list that has an element of type $A$ followed by a list of type \texttt{List} $A$. The underscore before '::' is a placeholder for the first argument of the constructor (an element of type $A$), and the underscore after '::' is a placeholder for the second argument of the constructor (a list of type \texttt{List} $A$).


\subsection{Dependent types}

A dependent type is a type that depends on elements of another type. An example of a dependent type is a dependent function, where the result type depends on the value of the argument.  In Agda, this is denoted by $(x : A) \to B$, representing functions that take an argument $x$ of type $A$ and produce a result of type $B$. A special case is when $x$ itself is a type. For instance, we can define the polymorphic identity function

\ExecuteMetaData[agda/latex/examples.tex]{id1}
This function takes a type argument $A$ and an element $x$ of type $A$, and returns $x$. In \Agda it is possible to use implicit arguments. To declare an argument as implicit we use curly braces instead of parenthesis when declaring the type argument. In particular, $\{A : Type\} \to B$ means the same thing as $(A : Type) \to B$, but we don't need to provide the type $A$ explicitly, the type checker will try to infer it for us. We can now redefine the identity function above as follows:

\ExecuteMetaData[agda/latex/examples.tex]{id2}
Note that we no longer need to supply the type $A$.


\subsection{Cubical Agda}

In this project, we will be working with quotient types, which motivates the use of \CubicalAgda\cite{VMA_2021}. \CubicalAgda is an extension of \Agda that incorporates features from Cubical Type Theory, that natively supports set quotients\cite{AgdaDoc}. We will use the \agdaCubical library, which is the standard library for \CubicalAgda. However, it is important to note that we will only be using a small portion of the \agdaCubical library, and any cubical theory is beyond the scope of this thesis.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Propositional calculus in Agda %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Propositional calculus in Agda}

Propositional calculus is a formal system that consists of a set of propositional constants, symbols, inference rules, and axioms. The symbols in propositional calculus represent logical connectives and parentheses, and are used to construct well-formed formulas that follow the syntax of the system. The inference rules specify how these symbols can be used to derive additional statements from the initial assumptions, which are given by the axioms of the system. 

The reader is expected to be somewhat familiar with propositional calculus and natural deduction, if not they can refer to \cite{carlstrom} or \cite{vanDalen} which are the basis for most of the definitions and rules used in this section.


%% Formulas %%

\subsection{Formulas}

In order to represent propositional calculus in \Agda we first need to define the type for formulas and the language in which we express them.

\begin{definition}[Language]\label{language}
    The language $\mathcal{L}$ of propositional calculus consists of
    \begin{itemize}
        \item proposition symbols: $p_0,p_1,\hdots,p_n$,
        \item logical connectives: $\wedge,\vee,\neg,\top,\bot$,
        \item auxiliary symbols: ( and ).
    \end{itemize}
\end{definition}
Note that we have omitted the common logical connectives $\rightarrow$ and $\leftrightarrow$. This is because we can define them using other connectives, 
\begin{align*}
    \phi \rightarrow \psi &\myeq \neg \phi \vee \psi, \\
    \phi \leftrightarrow \psi &\myeq (\phi \rightarrow \psi) \wedge (\psi \rightarrow \phi),
\end{align*}
making them redundant. It is possible to choose an even smaller set of connectives \cite{vanDalen}, but we choose this set as it is convenient.

\begin{definition}[Well formed formula]\label{wellformed}
    The set of well formed formulas is inductively defined as follows:
    \begin{itemize}
        \item any propositional constant $p_0,p_1,\hdots,p_n$ is a well formed formula,
        \item $\top$ and $\bot$ are well formed formulas,
        \item if $p$ is a well formed formula, then so is
        $$\neg p,$$
        \item if $p_i$ and $p_j$ are well formed formulas, then so are
            $$p_i \wedge p_j \quad \text{and} \quad p_i \vee p_j.$$
    \end{itemize}
    The formula $\top$ should be thought of as the proposition that is always true, and the formula $\bot$ interpreted as the proposition that is always false.
\end{definition}

Now we are ready to define the type for well formed formulas in \Agda using the definition above. The propositional constants $p_0, p_1, \hdots$ will be represented using natural numbers. The symbols of the language are already present in \Agda.
\begin{agdadef}[Well formed formula]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{form}
\end{agdadef}




%% Context %%

\subsection{Context}
\begin{definition}[Context]
    A context is a set of sentences in the language $\mathcal{L}$. The set is defined inductively as follows:
    \begin{itemize}
        \item the empty set is a context
        \item if $\Gamma$ is a context, then $\Gamma \cup \{\phi\}$ is also a context, where $\phi$ a formula.
    \end{itemize}
\end{definition}
We will sometimes write $\Gamma, \phi$ instead of $\Gamma \cup \{\phi\}$, but they should both be thought of as the latter. In \Agda we can represent context as a list type.

\begin{agdadef}[Context]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ctxt}
\end{agdadef}
We also need a way to determine if a given formula is in a given context. 
\begin{definition}\label{lookup}
    For all contexts $\Gamma$ and all formulas $\phi$ and $\psi$
    \begin{itemize}
        \item $\phi \in \Gamma \cup \{\phi\}$,
        \item if $\phi \in \Gamma$, then $\phi \in \Gamma \cup \{\psi\}$.
    \end{itemize}
\end{definition}

\begin{agdadef}[Lookup]\label{agdaLookup}$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{lookup}
\end{agdadef}


%% Inference rules %%

\subsection{Inference rules}

Inference rules are used to derive new propositions from existing ones. In order to formalize the process of proving propositions in our system, we introduce a new data type for provability. 

\begin{agdadef} $ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{provability}
    \hspace{40mm}$\vdots$
\end{agdadef}
This data type has as its inhabitants all of the possible inference rules that can be used to prove a given proposition. These inference rules are defined in the coming sections and are on the form:

\begin{verbatim}
    rulename : {... : ctxt} {... : Formula}
        -> premise 1
        -> premise 2
               :
        -> premise n 
        -> conclusion
\end{verbatim}


\subsubsection{Logical connectives}

Rules for the logical connectives come in pairs of introduction and elimination rules, apart from $\top$, which has only an introduction rule, and $\bot$, which has only an elimination rule.

The introduction rule for conjunction states that if there is a derivation of $\phi$ from $\Gamma$, and a derivation of $\psi$ from $\Gamma$, then we can conclude that there is a derivation of $\phi \wedge \psi$ from $\Gamma$.
\begin{mathpar}
    \inferrule*[Right=\scriptsize $\wedge$-I]
        {\Gamma \vdash \phi \\ \Gamma \vdash \psi }
        {\Gamma \vdash \phi \wedge \psi}
\end{mathpar}

\begin{agdadef}[Conjunction introduction]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjI}
\end{agdadef}


The corresponding elimination rules says that if there is some derivation concluding in $\phi \wedge \psi$ from $\Gamma$, then we can conclude that there is a derivation of $\phi$, and a derivation of $\psi$, from $\Gamma$.

\begin{mathpar}
    \inferrule*[right=\scriptsize $\wedge$-E$_1$]
        {\Gamma \vdash \phi \wedge \psi}
        {\Gamma \vdash \phi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\wedge$-E$_2$]
        {\Gamma \vdash \phi \wedge \psi}
        {\Gamma \vdash \psi}
\end{mathpar}

\begin{agdadef}[Conjunction elimination]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjE1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conjE2}
\end{agdadef}

For disjunction, we have two introduction rules. If we can derive a formula $\phi$ from $\Gamma$, then we can also derive $\phi \vee \psi$ from $\Gamma$. Similarly, if we can derive $\psi$ from $\Gamma$, then we can also derive $\phi \vee \psi$ from $\Gamma$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\vee$-I$_1$]
        {\Gamma \vdash \psi}
        {\Gamma \vdash \phi \vee \psi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\vee$-I$_2$]
        {\Gamma \vdash \phi}
        {\Gamma \vdash \phi \vee \psi}
\end{mathpar}

\begin{agdadef}[Disjunction introduction]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjI1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjI2}
\end{agdadef}



The elimination rule for disjunction is a bit more involved. If $\phi \vee \psi$ can be deduced from $\Gamma$, then we can conclude $\Gamma \vdash \gamma$ if the extended contexts $\Gamma, \phi$ and $\Gamma, \psi$ both conclude in $\gamma$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\vee$-E]
        {\Gamma \vdash \phi \vee \psi \\ 
         \Gamma , \phi \vdash \gamma\\
         \Gamma , \psi \vdash \gamma}
        {\Gamma \vdash \gamma}
\end{mathpar}

\begin{agdadef}[Disjunction elimination]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disjE}
\end{agdadef}



\begin{definition}
    A context $\Gamma$ is inconsistent if $\Gamma \vdash \bot$. A context that is not inconsistent, is called consistent.
\end{definition}

\begin{definition}[Law of non-contradiction]
    The law of non-contradiction states that a proposition and its negation can not both be true at the same time.
\end{definition}

The definition of inconsistency and the law of non-contradiction together motivates the introduction and elimination rules for negation.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\neg$-I]
        {\Gamma, \phi \vdash \bot}
        {\Gamma \vdash \neg \phi}
    \hspace{10mm}
    \inferrule*[right=\scriptsize $\neg$-E]
        {\Gamma \vdash \phi \\ \Gamma \vdash \neg \phi}
        {\Gamma \vdash \bot}
\end{mathpar}

\begin{agdadef}[Negation introduction]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{negI}
\end{agdadef}

\begin{agdadef}[Negation elimination]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{negE}
\end{agdadef}


In Definition \ref{wellformed} we mentioned that $\top$ should be thought of as the proposition that is always true. In particular, it needs no premise when introduced and we write $\vdash \top$ because no context is necessary to deduce $\top$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\top$-I]
        { }{\vdash \top}
\end{mathpar}

\begin{agdadef}[$\top$ introduction]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{topI}
\end{agdadef}

If a context is inconsistent one can derive anything from it, which leads to the elimination rule for $\bot$.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\bot$-E]
        {\Gamma \vdash \bot}
        {\Gamma \vdash \phi}
\end{mathpar}

\begin{agdadef}[$\bot$ elimination]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{botE}
\end{agdadef}


\subsubsection{Law of excluded middle}

\begin{definition}
    The law of excluded middle states that for every proposition, either the proposition or its negation is true.
\end{definition}
This principle is equivalent to the statement that $\phi \vee \neg \phi$ is a tautology, where $\phi$ is any proposition. Given the above definition, we can introduce an inference rule for LEM. Similar to $\top$ introduction this rule requires no premise.
\begin{mathpar}
    \inferrule*[right=\scriptsize LEM]
        { }{\vdash \phi \vee \neg \phi}
\end{mathpar}

\begin{agdadef}[Law of excluded middle]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LEM}
\end{agdadef}

By using the LEM inference rule in our system, we can derive new propositions and prove theorems based on the principle of excluded middle. This, together with the law non-contradiction which we used to define the negation rules, is what makes our logic classical.


\subsubsection{Structural rules}

Weakening is a structural rule that states that we can extend the hypothesis with additional assumptions.
\begin{mathpar}
    \inferrule*[right=\scriptsize weakening]
        {\Gamma \vdash \phi}
        {\Gamma , \psi \vdash \phi}
\end{mathpar}

\begin{agdadef}[Weakening]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{weakening}
\end{agdadef}



The structural rule of exchange allows us to permute the formulas in the context. However, we will be using a stricter version of exchange, where we can only permute the two formulas at the end of the context. This version is easier to implement and still satisfies our needs.
\begin{mathpar}
    \inferrule*[right=\scriptsize exchange]
        {\Gamma , \phi , \psi \vdash \gamma}
        {\Gamma , \psi , \phi \vdash \gamma}
\end{mathpar}

\begin{agdadef}[Exchange]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{exchange}
\end{agdadef}

The third common structural rule, contraction, has been omitted here. By omitting this rule we get achieve an affine logic\cite{nlab:affine_logic}.

%% Properties of propositional calc %%

\subsection{Properties of a propositional calculus}

In this section we aim to prove some properties of propositional calculus as they will be important later.

\subsubsection{Biprovability relation}

\begin{definition}\label{eq-def}
    Let $S$ be the set of all the sentences of $\mathcal{L}$. Define the relation $\sim$ such that for $\phi,\psi \in S$,
    $$\phi \sim \psi \qquad \text{iff} \qquad \Gamma, \phi \vdash \psi \text{ and } \Gamma , \psi \vdash \phi$$
\end{definition}
Because the definition of the relation is a pair it is natural to define it in \Agda as a product type.

\begin{agdadef}[Biprovability relation]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq}
\end{agdadef}


Before we prove that this is an equivalence relation we will prove a useful lemma.
\begin{lemma}[Cut]\label{trans-lemma}
    Given $\Gamma, \phi \vdash \psi$ and $\Gamma, \psi \vdash \gamma$, it follows that $\Gamma, \phi \vdash \gamma$
\end{lemma}
\begin{proof}
    This is done through natural deduction using the deduction rules defined previously.
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\vee$-i$_2$]
                {\Gamma, \phi \vdash \psi}
                {\Gamma, \phi \vdash \psi \vee \gamma} \\
             \inferrule*[right=\scriptsize exchange]
                {\inferrule*[right=\scriptsize weakening]
                    {\Gamma, \psi \vdash \gamma}
                    {\Gamma, \psi, \phi \vdash \gamma}}
                {\Gamma, \phi, \psi \vdash \gamma} \\
             \inferrule*[right=\scriptsize axiom]
                {\gamma \in \Gamma , \phi, \gamma}
                {\Gamma , \phi, \gamma \vdash \gamma}}
            {\Gamma, \phi \vdash \gamma}
    \end{mathpar}
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{cut}
    Remember from \Agda definition \ref{agdaLookup} that \texttt{Z} stands for $\phi \in \Gamma, \phi$, hence \texttt{axiom Z} is a proof of $\Gamma, \phi \vdash \phi$.
\end{proof}

\begin{theorem}\label{eq}
    The relation $\sim$ is an equivalence relation.
\end{theorem}

\begin{proof}
    It follows immediately from the axiom rule,
    \begin{mathpar}
        \inferrule*[right=\scriptsize axiom]
            {\phi \in \Gamma, \phi}
            {\Gamma ,\phi \vdash \phi}
    \end{mathpar}
    that $\phi \sim \phi$, so the relation is reflexive.

    It should be clear that $\Gamma, \phi \vdash \psi \text{ and } \Gamma , \psi \vdash \phi$ is just a pair of proofs, hence it does not matter in which order we give them. This means that the relation is also symmetric.

    In order to prove transitivity we need to show that, given $\phi \sim \gamma$ and $\gamma \sim \psi$, it holds that $\phi \sim \psi$. By Definition \ref{eq-def} we have the following:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, \phi \vdash \gamma$,
        \item $\Gamma, \gamma \vdash \phi$,
        \item $\Gamma, \gamma \vdash \psi$,
        \item $\Gamma, \psi \vdash \gamma$.
    \end{enumerate}
    Now we can apply Lemma \ref{trans-lemma} on (i) and (iii) to conclude $\Gamma, \phi \vdash \psi$, and again to (iv) and (ii) to conclude $\Gamma, \psi \vdash \phi$. Thus we have shown that $\phi \sim \psi$.
    
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{refl}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{sym}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{trans}
\end{proof}


\subsubsection{Commutativity}

\begin{proposition}\label{conj-comm}
    Conjunction is commutative, that is $\phi \wedge \psi \sim \psi \wedge \phi$.
\end{proposition}

\begin{proof} We need to show $\Gamma, \phi \wedge \psi \vdash \psi \wedge \phi$ and $\Gamma, \psi \wedge \phi \vdash \phi \wedge \psi$. To show $\Gamma, \phi \wedge \psi \vdash \psi \wedge \phi$, we use natural deduction:
\begin{mathpar}
    \inferrule*[right=\scriptsize $\wedge$-I]
        {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
            {\inferrule*[right= \scriptsize axiom]
                {\phi \wedge \psi \in \Gamma, \phi \wedge \psi}
                {\Gamma,\phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma,\phi \wedge \psi \vdash \psi} \\
        \inferrule*[right=\scriptsize $\wedge$-E$_1$]
            {\inferrule*[right= \scriptsize axiom]
                {\phi \wedge \psi \in \Gamma, \phi \wedge \psi}
                {\Gamma,\phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma,\phi \wedge \psi \vdash \phi}}
        {\Gamma \vdash \psi \wedge \phi}
\end{mathpar}

The proof of the second part is identical up to renaming of the formulas. Together they prove the equivalence $\phi \wedge \psi \sim \psi \wedge \phi$. 
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-comm}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{comm-eq-conj}
\end{proof}

\begin{proposition}\label{disj-comm}
    Disjunction is commutative, that is $\phi \vee \psi \sim \psi \vee \phi$.
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$ and $\Gamma, \psi \vee \phi \vdash \phi \vee \psi$. Up to renaming of the formulas, the proofs are identical, so it suffices to show $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$. Let $\Gamma' = \Gamma \cup \{\phi \vee \psi\}$, then by natural deduction we have:
    \begin{mathpar}
        \mprset{sep=0.5em}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee \psi \in \Gamma'}
                {\Gamma' \vdash \phi \vee \psi} \\ 
             \inferrule*[right=\scriptsize$\vee$-I$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma', \phi}
                    {\Gamma', \phi \vdash \phi}}
                {\Gamma',\phi \vdash \psi \vee \phi} \\
             \inferrule*[right=\scriptsize$\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\psi \in \Gamma',\psi}
                    {\Gamma', \psi \vdash \psi}}
                {\Gamma',\psi \vdash \psi \vee \phi}}
            {\Gamma' \vdash \psi \vee \phi}
    \end{mathpar}
    Thus we have shown $\Gamma, \phi \vee \psi \vdash \psi \vee \phi$ and $\Gamma, \psi \vee \phi \vdash \phi \vee \psi$, so we have the equivalence $\phi \vee \psi \sim \psi \vee \phi$. 

\end{proof}
\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-comm}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{comm-eq-disj}
\end{proof}


\subsubsection{Associativity}

\begin{proposition}
    Conjunction is associative, that is $\phi \wedge (\psi \wedge \gamma) \sim (\phi \wedge \psi) \wedge \gamma$.
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \wedge (\psi \wedge \gamma) \vdash (\phi \wedge \psi) \wedge \gamma$ and $\Gamma, (\phi \wedge \psi) \wedge \gamma \vdash \phi \wedge (\psi \wedge \gamma)$. Using natural deduction, we can prove both statements. Since the two proofs become identical when using the commutativity property and relabeling the formulas, it suffices to show the first one.

    Let $\Gamma' = \Gamma \cup \{\phi \wedge (\psi \wedge \gamma)\}$. Then we can make a deduction $\mathcal{D}_1$ concluding in $\Gamma' \vdash \varphi \wedge \psi$,

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                   {\inferrule*[right=\scriptsize axiom]
                        {\phi \wedge (\psi \wedge \gamma) \in \Gamma'}
                        {\Gamma' \vdash \phi \wedge (\psi \wedge \gamma)}}
                    {\Gamma' \vdash \psi \wedge \gamma}}
                {\Gamma' \vdash \psi} \\
             \inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge (\psi \wedge \gamma) \in \Gamma'}
                    {\Gamma' \vdash \phi \wedge (\psi \wedge \gamma)}}
                {\Gamma' \vdash \phi}}
            {\Gamma' \vdash \phi \wedge \psi}
    \end{mathpar}
and another deduction $\mathcal{D}_2$ concluding in $\Gamma' \vdash \gamma$,
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \wedge (\psi \wedge \gamma) \in \Gamma'}
                        {\Gamma' \vdash \phi \wedge (\psi \wedge \gamma)}}
                    {\Gamma' \vdash \psi \wedge \gamma}}
                {\Gamma' \vdash \gamma}
    \end{mathpar}
Now, with the derivations $\mathcal{D}_1$ and $\mathcal{D}_2$ we can, using conjunction introduction, conclude that $\Gamma' \vdash (\phi \wedge \psi) \wedge \gamma$,
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\mathcal{D}_1 \\ \mathcal{D}_2}
            {\Gamma' \vdash (\phi \wedge \psi) \wedge \gamma}
    \end{mathpar}
Thus we have shown that $\Gamma, \phi \wedge (\psi \wedge \gamma) \vdash (\phi \wedge \psi) \wedge \gamma$. Together with the omitted proof we get the equivalence $\phi \wedge (\psi \wedge \gamma) \sim (\phi \wedge \psi) \wedge \gamma$.
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-ass1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-ass2}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ass-eq-conj}
\end{proof}

\begin{proposition}
    Disjunction is associative, that is $\phi \vee (\psi \vee \gamma) \sim (\phi \vee \psi) \vee \gamma$.
\end{proposition}

\begin{proof}
    We need to show $\Gamma, \phi \vee (\psi \vee \gamma) \vdash (\phi \vee \psi) \vee \gamma$ and $\Gamma, (\phi \vee \psi) \vee \gamma \vdash \phi \vee (\psi \vee \gamma)$. Proof is done through natural deduction. Let $\Gamma' = \Gamma \cup \{\phi \vee (\psi \vee \gamma)\}$, then
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee (\psi \vee \gamma) \in \Gamma'}
                {\Gamma' \vdash \phi \vee (\psi \vee \gamma)} \\
            \mathcal{D}_1 \\
            \mathcal{D}_2}
            {\Gamma' \vdash (\phi \vee \psi) \vee \gamma}
    \end{mathpar}
    Here we need $\mathcal{D}_1$ to be a deduction of $\Gamma', \phi \vdash (\phi \vee \psi) \vee \gamma$ and and $\mathcal{D}_2$ a deduction of $\Gamma', \psi \vee \gamma\vdash (\phi \vee \psi) \vee \gamma$. We can construct $\mathcal{D}_1$ as follows:
    \begin{mathpar}
        \inferrule*[right=\scriptsize$\vee$-I$_2$]
                {\inferrule*[right=\scriptsize$\vee$-I$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\phi \in \Gamma',\phi}
                        {\Gamma', \phi \vdash \phi}}
                    {\Gamma', \phi \vdash \phi \vee \psi}}
                {\Gamma', \phi \vdash (\phi \vee \psi) \vee \gamma}
    \end{mathpar}
    Now, let $\Gamma'' = \Gamma' \cup \{\psi \vee \gamma\}$, then $\mathcal{D}_2$ is constructed as follows:
    \begin{mathpar}
        \mprset{sep=1em}
        \inferrule*[right=\scriptsize$\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\psi \vee \gamma \in \Gamma''}
                {\Gamma'' \vdash \psi \vee \gamma} \\
                \inferrule*[right=\scriptsize$\vee$-I$_2$]
                    {\inferrule*[right=\scriptsize$\vee$-I$_1$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \in \Gamma'', \psi}
                        {\Gamma'',\psi \vdash \psi}}
                    {\Gamma'',\psi \vdash \phi \vee \psi}}
                    {\Gamma'',\psi \vdash (\phi \vee \psi) \vee \gamma}  \\
             \inferrule*[right=\scriptsize$\vee$-I$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\gamma \in \Gamma'',\gamma}
                    {\Gamma'',\gamma \vdash \gamma}}
                {\Gamma'',\gamma \vdash (\phi \vee \psi) \vee \gamma}}
            {\Gamma''\vdash (\phi \vee \psi) \vee \gamma}
    \end{mathpar}

    The proof of $\Gamma, (\phi \vee \psi) \vee \gamma \vdash \phi \vee (\psi \vee \gamma)$ is identical when relabeling the formulas and using that disjunction is commutative as proven earlier. With these results we get the equivalence $\phi \vee (\psi \vee \gamma) \sim (\phi \vee \psi) \vee \gamma$.

\end{proof}

\begin{proof}[Agda proof] $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-ass1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-ass2}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{ass-eq-disj}
\end{proof}


\subsubsection{Distributivity}\label{dist-section}

\begin{proposition}\label{conj-dist}
    Distribution over conjunction holds, that is the equivalence $\phi \wedge (\psi \vee \gamma) \sim (\phi \wedge \psi) \vee (\phi \wedge \gamma)$ holds.
\end{proposition}

\begin{proof}
    First we show that $\Gamma, \phi \wedge (\psi \vee \gamma) \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)$. Let $\Gamma_1 = \Gamma \cup \{\phi \wedge (\psi \vee \gamma)\}$, then
    
    \begin{mathpar}
        \mprset{sep=1em}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge (\psi \vee \gamma) \in \Gamma_1}
                    {\Gamma_1 \vdash \phi \wedge (\psi \vee \gamma)}}
                {\Gamma_1 \vdash \psi \vee \gamma} \\ 
            \mathcal{D}_1 \\ 
            \mathcal{D}_2}
            {\Gamma_1 \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}
    where $\mathcal{D}_1$ is a derivation concluding in $\Gamma_1,\psi \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)$ and $\mathcal{D}_2$ a derivation concluding in $\Gamma_1,\gamma \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)$. We start by performing the derivation $\mathcal{D}_1$:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_2$]
            {\inferrule*[right=\scriptsize $\wedge$-I]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                        {\inferrule*[right=\scriptsize axiom]
                            {\phi \wedge (\psi \vee \gamma) \in \Gamma_1}
                            {\Gamma_1 \vdash \phi \wedge (\psi \vee \gamma)}}
                        {\Gamma_1 \vdash \phi}}
                    {\Gamma_1, \psi \vdash \phi} \\
                 \inferrule*[right=\scriptsize axiom]
                    {\psi \in \Gamma_1, \psi}
                    {\Gamma_1,\psi \vdash \psi}}
                {\Gamma_1,\psi \vdash \phi \wedge \psi}}
            {\Gamma_1,\psi \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}
    Then we derive $\mathcal{D}_2$:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-I]
                    {\inferrule*[right=\scriptsize weakening]
                        {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                            {\inferrule*[right=\scriptsize axiom]
                                {\phi \wedge (\psi \vee \gamma)\in\Gamma_1}
                                {\Gamma_1 \vdash \phi \wedge (\psi \vee \gamma)}}
                            {\Gamma_1 \vdash \phi}}
                        {\Gamma_1,\gamma \vdash \phi} \\
                     \inferrule*[right=\scriptsize axiom]
                        {\gamma \in \Gamma_1,\gamma}
                        {\Gamma_1,\gamma \vdash \gamma}}
                    {\Gamma_1,\gamma \vdash \phi \wedge \gamma}}
                {\Gamma_1,\gamma \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)}
    \end{mathpar}

    This proves the first part of the equivalence. Now let $\Gamma_2 = \Gamma \cup \{(\phi \wedge \psi) \vee (\phi \wedge \gamma)\}$, then we want to show $\Gamma_2 \vdash \phi \wedge (\psi \vee \gamma)$. This means that if we can find derivations $\mathcal{D}_1'$ concluding in $\Gamma_2 \vdash \phi$ and $\mathcal{D}_2'$ concluding in $\Gamma_2 \vdash (\psi \vee \gamma)$ we can apply conjunction introduction to get the desired result.

    We will start with the derivation tree $\mathcal{D}_1'$:

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-E$_1$, lab=$\mathcal{D}_1''$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \psi \in \Gamma_2, \phi \wedge \psi}
                    {\Gamma_2, \phi \wedge \psi \vdash \phi \wedge \psi}}
                {\Gamma_2,\phi \wedge \psi \vdash \phi}
                \quad
        \inferrule*[right=\scriptsize $\wedge$-E$_1$, lab=$\mathcal{D}_1'''$]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \wedge \gamma \in \Gamma_2, \phi \wedge \gamma}
                {\Gamma_2, \phi \wedge \gamma \vdash \phi \wedge \gamma}}
            {\Gamma_2,\phi \wedge \gamma \vdash \phi}
    \end{mathpar}

    \begin{mathpar}
        \inferrule*[right= \scriptsize $\vee$-E, lab=$\mathcal{D}_1'$]
            {\inferrule*[right=\scriptsize axiom]
            {(\phi \wedge \psi) \vee (\phi \wedge \gamma)\in \Gamma_2}
            {\Gamma_2 \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)} \\
            \mathcal{D}_1'' \\
            \mathcal{D}_1'''}
            {\Gamma_2 \vdash \phi}
    \end{mathpar}

Next we construct the derivation tree $\mathcal{D}_2'$ as follows:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_2$, lab=$\mathcal{D}_2''$]
            {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \psi \in \Gamma_2, \phi \wedge \psi}
                    {\Gamma_2, \phi \wedge \psi \vdash \phi \wedge \psi}}
                {\Gamma_2,\phi \wedge \psi \vdash \psi}}
            {\Gamma_2,\phi \wedge \psi \vdash \psi \vee \gamma}
        \quad
    \inferrule*[right=\scriptsize $\vee$-I$_1$, lab=$\mathcal{D}_2'''$]
        {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \wedge \gamma \in \Gamma_2, \phi \wedge \gamma}
                {\Gamma_2, \phi \wedge \gamma \vdash \phi \wedge \gamma}}
            {\Gamma_2,\phi \wedge \gamma \vdash \gamma}}
        {\Gamma_2,\phi \wedge \gamma \vdash \psi \vee \gamma}
    \end{mathpar}
    
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E, lab=$\mathcal{D}_2'$]
            {\inferrule*[right=\scriptsize axiom]
                {(\phi \wedge \psi) \vee (\phi \wedge \gamma)\in \Gamma_2}
                {\Gamma_2 \vdash (\phi \wedge \psi) \vee (\phi \wedge \gamma)} \\
                \mathcal{D}_2'' \\
                \mathcal{D}_2'''}
            {\Gamma_2 \vdash \psi \vee \gamma}
    \end{mathpar}

Lastly we put them together with conjunction introduction to get the desired result.
\begin{mathpar}
    \inferrule*[right=\scriptsize $\wedge$-I]
        {\mathcal{D}_1' \\ \mathcal{D}_2'}
        {\Gamma_2 \vdash \phi \wedge (\psi \vee \gamma)}
\end{mathpar}
This concludes the proof that $\phi \wedge (\psi \vee \gamma) \sim (\phi \wedge \psi) \vee (\phi \wedge \gamma)$.
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-dist1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{conj-dist2}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{dist-eq-conj}
\end{proof}

\begin{proposition}\label{disj-dist}
    Distribution over disjunction holds, that is the equivalence $\phi \vee (\psi \wedge \gamma) \sim (\phi \vee \psi) \wedge (\phi \vee \gamma)$ holds.
\end{proposition}

\begin{proof}
    We aim to show $\Gamma, \phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$ and $\Gamma, (\phi \vee \psi) \wedge (\phi \vee \gamma) \vdash \phi \vee (\psi \wedge \gamma)$. 
    
    Let $\Gamma_1 = \Gamma \cup \{\phi \vee (\psi \wedge \gamma)\}$. We want to use disjunction elimination here, so we want to find derivations $\mathcal{D}_1$ and $\mathcal{D}_2$, such that

    \begin{mathpar}
        \inferrule*[right=\scriptsize$\vee$-E]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \vee (\psi \wedge \gamma) \in \Gamma_1}
                {\Gamma_1 \vdash \phi \vee (\psi \wedge \gamma)} \\
             \mathcal{D}_1 \\
             \mathcal{D}_2}
            {\Gamma_1 \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    This means $\mathcal{D}_1$ should conclude with $\Gamma_1,\phi \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$. We construct $\mathcal{D}_1$ as follows:
    \begin{mathpar}
        \inferrule*[right=\scriptsize$\wedge$-I]
            {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma_1,\phi}
                    {\Gamma_1,\phi \vdash \phi}}
                {\Gamma_1,\phi \vdash \phi \vee \psi} \\
             \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma_1,\phi}
                    {\Gamma_1, \phi \vdash \phi}}
                {\Gamma_1,\phi \vdash (\phi \vee \gamma)}}
            {\Gamma_1,\phi \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    Then we need to construct $\mathcal{D}_2$, concluding in $\Gamma_1,\psi \wedge \gamma \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$. This can be done as follows:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \wedge \gamma \in \Gamma_1,\psi \wedge \gamma}
                        {\Gamma_1,\psi \wedge \gamma \vdash \psi \wedge \gamma}}
                    {\Gamma_1,\psi \wedge \gamma \vdash \psi}}
                {\Gamma_1,\psi \wedge \gamma \vdash (\phi \vee \psi)} \\
             \inferrule*[right=\scriptsize $\vee$-I$_1$]
                {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \wedge \gamma \in \Gamma_1,\psi \wedge \gamma}
                        {\Gamma_1,\psi \wedge \gamma \vdash \psi \wedge \gamma}}
                    {\Gamma_1,\psi \wedge \gamma \vdash \gamma}}
                {\Gamma_1,\psi \wedge \gamma \vdash (\phi \vee \gamma)}}
            {\Gamma_1,\psi \wedge \gamma \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}
    \end{mathpar}
    This proves $\Gamma, \phi \vee (\psi \wedge \gamma) \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)$. To prove the second part we let $\Gamma_2 = \Gamma \cup \{(\phi \vee \psi) \wedge (\phi \vee \gamma)\}$, and then we find $\mathcal{D}_1'$ and $\mathcal{D}_2'$ such that

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {(\phi \vee \psi) \wedge (\phi \vee \gamma) \in \Gamma_2 }
                    {\Gamma_2 \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                {\Gamma_2 \vdash \phi \vee \psi} \\
             \mathcal{D}_1' \\
             \mathcal{D}_2'}
            {\Gamma_2 \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    The derivation $\mathcal{D}_1'$ should conclude in $\Gamma_2, \phi \vdash \phi\vee (\psi \wedge \gamma)$. This is done as follows:
    \begin{mathpar}
        \inferrule*[right= \scriptsize $\vee$-I$_2$]
            {\inferrule*[right= \scriptsize axiom]
                {\phi \in \Gamma_2, \phi}
                {\Gamma_2, \phi \vdash \phi}}
            {\Gamma_2, \phi \vdash \phi\vee (\psi \wedge \gamma)}
    \end{mathpar}
    To derive $\mathcal{D}_2'$, concluding in $\Gamma_2,\psi \vdash \phi \vee (\psi \wedge \gamma)$, we need to use disjunction elimination again. In order to do that we need to find derivations $\mathcal{D}_2''$, concluding in $\Gamma_2,\psi,\phi \vdash \phi \vee (\psi \wedge \gamma)$, and $\mathcal{D}_2'''$, concluding in $\Gamma_2,\psi,\gamma \vdash \phi \vee (\psi \wedge \gamma)$, such that this derivation $\mathcal{D}_2'$ holds.
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=\scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {(\phi \vee \psi) \wedge (\phi \vee \gamma)\in \Gamma_2}
                        {\Gamma_2 \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                    {\Gamma_2,\psi \vdash (\phi \vee \psi) \wedge (\phi \vee \gamma)}}
                {\Gamma_2,\psi \vdash \phi \vee \gamma} \\
             \mathcal{D}_2'' \\ 
             \mathcal{D}_2'''}
            {\Gamma_2,\psi \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    We can derive $\mathcal{D}_2''$ as follows:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_2$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \in \Gamma',\psi,\phi}    
                    {\Gamma',\psi,\phi \vdash \phi}}
                {\Gamma',\psi,\phi\vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    And derivation $\mathcal{D}_2'''$ is done in the following way:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-I$_1$]
            {\inferrule*[right=\scriptsize $\wedge$-I]
                {\inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {\psi \in \Gamma',\psi}
                        {\Gamma',\psi \vdash \psi}}
                    {\Gamma',\psi,\gamma \vdash \psi}
                     \\
                \inferrule*[right=\scriptsize axiom]
                    {\gamma \in \Gamma',\psi,\gamma}
                    {\Gamma',\psi,\gamma \vdash \gamma}}
                {\Gamma',\psi,\gamma \vdash \psi \wedge \gamma}}
            {\Gamma',\psi,\gamma \vdash \phi \vee (\psi \wedge \gamma)}
    \end{mathpar}
    Thus we have also shown that $\Gamma, (\phi \vee \psi) \wedge (\phi \vee \gamma) \vdash \phi \vee (\psi \wedge \gamma)$. So the equivalence $\phi \vee (\psi \wedge \gamma) \sim (\phi \vee \psi) \wedge (\phi \vee \gamma)$ holds.
\end{proof}


\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-dist1}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{disj-dist2}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{dist-eq-disj}
\end{proof}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%   Lindenbaum Tarski algebra    %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Lindenbaum-Tarski algebra in Cubical Agda}

The Lindenbaum-Tarski algebra is an algebraic structure that consists of equivalence classes of logical formulas, where two formulas are considered equivalent if they have the same logical consequences within the given logical system. 

The algebraic operations in the Lindenbaum-Tarski algebra are derived from the logical connectives present in the underlying logical system. These operations allow for the manipulation of formulas within the algebraic structure. In particular, the Lindenbaum-Tarski algebra for propositional logic is the algebra we get when quotienting the algebra of formulas with the equivalence relation $\sim$ defined previously. We define the algebraic operations on the equivalence classes to be conjunction, disjunction, and negation.

\begin{definition}[Lindenbaum-Tarski algebra]
    The Lindenbaum-Tarski algebra is the quotient algebra obtained by factoring the algebra of formulas by the equivalence relation $\sim$.
\end{definition}
We use the definition of a set quotient already existing in the \agdaCubical library to define the Lindenbaum-Tarski algebra.

\begin{agdadef}[Lindenbaum-Tarski algebra]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT}
\end{agdadef}



\subsection{Binary operations and propositional constants}

To define operations on the Lindenbaum-Tarski algebra, we utilize the already existing functions \texttt{setQuotBinOp} and \texttt{setQuotUnaryOp} from the \agdaCubical library, which operate on set quotients. Our first step is to define conjunction in the Lindenbaum-Tarski algebra, using \texttt{setQuotBinOp} to create a binary operation. In order to do this, we must provide proof that the underlying operation - conjunction on formulas in the propositional calculus - respects the equivalence relation $\sim$. We will establish this as a lemma.

\begin{lemma}
    For all formulas $\phi,\phi',\psi,\psi'$, if $\phi \sim \phi'$ and $\psi \sim \psi'$, then $\phi \wedge \psi \sim \phi' \wedge \psi'$.
\end{lemma}

\begin{proof} By definition of the relation $\sim$ we have:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, \phi \vdash \phi'$
        \item $\Gamma, \phi' \vdash \phi$
        \item $\Gamma, \psi \vdash \psi'$
        \item $\Gamma, \psi' \vdash \psi$
    \end{enumerate}
    We want to show that then $\Gamma, \phi \wedge \psi \vdash \phi' \wedge \psi'$ and $\Gamma, \phi' \wedge \psi' \vdash \phi \wedge \psi$. First, we show that $\Gamma, \phi \wedge \psi \vdash \phi' \wedge \psi'$. By the axiom rule and conjunction elimination, we have:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-E$_1$]
            {\inferrule*[right=\scriptsize axiom]
                {\phi \wedge \psi \in \Gamma, \phi \wedge \psi }
                {\Gamma, \phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma, \phi \wedge \psi \vdash \phi}
        \qquad
        \inferrule*[right=\scriptsize $\wedge$-E$_2$]
            {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \psi \in \Gamma, \phi \wedge \psi }
                    {\Gamma, \phi \wedge \psi \vdash \phi \wedge \psi}}
            {\Gamma, \phi \wedge \psi \vdash \psi}
    \end{mathpar}
    Now we can use Lemma \ref{trans-lemma} on $\Gamma, \phi \wedge \psi \vdash \phi$ and (i) to get $\Gamma, \phi \wedge \psi \vdash \phi'$, and similarly on $\Gamma, \phi \wedge \psi \vdash \psi$ and (iii) to get $\Gamma, \phi \wedge \psi \vdash \psi'$. Then, by conjunction introduction we get the desired result:
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\wedge$-I]
            {\Gamma, \phi \wedge \psi \vdash \phi' \\ \Gamma, \phi \wedge \psi \vdash \psi'}
            {\Gamma, \phi \wedge \psi \vdash \phi' \wedge \psi'}
    \end{mathpar}
    Proving $\Gamma, \phi' \wedge \psi' \vdash \phi \wedge \psi$ is identical to the first proof, so we omit it here.
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-conj}
\end{proof}

Now we are ready to define conjunction on Lindenbaum-Tarski algebra in \CubicalAgda.

\begin{agdadef}[Conjunction on Lindenbaum-Tarski algebra]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-conj}
\end{agdadef}


The \texttt{setQuotBinOp} function takes four arguments: two proofs of reflexivity, the logical conjunction operator $\wedge/$, and a proof that the operator respects the equivalence relation. In this case, the reflexivity proofs are identical since $A$ and $B$ are of the same type. The resulting function takes two elements $A$ and $B$ in the Lindenbaum-Tarski algebra and returns their conjunction.

When defining disjunction we need to prove a similar lemma as for the conjunction. We must provide proof that the disjunction operator respects the equivalence relation $\sim$.

\begin{lemma}
    For all formulas $\phi,\phi',\psi,\psi'$, if $\phi \sim \phi'$ and $\psi \sim \psi'$, then $\phi \vee \psi \sim \phi' \vee \psi'$.
\end{lemma}

\begin{proof} By definition of the relation $\sim$, we have:
    \begin{enumerate}[label=(\roman*)]
        \item $\Gamma, \phi \vdash \phi'$
        \item $\Gamma, \phi' \vdash \phi$
        \item $\Gamma, \psi \vdash \psi'$
        \item $\Gamma, \psi' \vdash \psi$
    \end{enumerate}
    We want to show that then $\Gamma, \phi \vee \psi \vdash \phi' \vee \psi'$ and $\Gamma, \phi' \vee \psi' \vdash \phi \vee \psi$. By the axiom rule and disjunction introduction, we have:
    \begin{mathpar}
        \inferrule*[right=\scriptsize axiom]
            {\phi \vee \psi \in \Gamma, \phi \vee \psi}
            {\Gamma, \phi \vee \psi \vdash \phi \vee \psi}
    \end{mathpar}
    Using (i) we can deduce:
    \begin{mathpar}
        \inferrule*[right=\scriptsize exchange]
            {\inferrule*[right=\scriptsize weakening]
                {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                    {\Gamma, \phi \vdash \phi'}
                    {\Gamma, \phi \vdash \phi' \vee \psi'}}
                {\Gamma, \phi, \phi \vee \psi \vdash \phi' \vee \psi'}}
            {\Gamma,\phi \vee \psi, \phi \vdash \phi' \vee \psi'}
    \end{mathpar}
    Similarly, using (iii) we can deduce:
    \begin{mathpar}
        \inferrule*[right=\scriptsize exchange]
            {\inferrule*[right=\scriptsize weakening]
                {\inferrule*[right=\scriptsize $\vee$-I$_2$]
                    {\Gamma, \psi \vdash \psi'}
                    {\Gamma, \psi \vdash \phi' \vee \psi'}}
                {\Gamma, \psi, \phi \vee \psi \vdash \phi' \vee \psi'}}
            {\Gamma,\phi \vee \psi, \psi \vdash \phi' \vee \psi'}
    \end{mathpar}
    Then by using disjunction elimination we get the desired result,
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\Gamma, \phi \vee \psi \vdash \phi \vee \psi \\
            \Gamma,\phi \vee \psi, \phi \vdash \phi' \vee \psi' \\
            \Gamma,\phi \vee \psi, \psi \vdash \phi' \vee \psi'}
            {\Gamma, \phi \vee \psi \vdash \phi' \vee \psi'}
    \end{mathpar}
    Proving $\Gamma, \phi' \vee \psi' \vdash \phi \vee \psi$ is identical to the first proof, so we omit it here.    
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-disj}
\end{proof}

Using \texttt{setQuotBinOp} we can now, with this lemma, define disjunction on Lindenbaum-Tarski algebra in \CubicalAgda.

\begin{agdadef}[Disjunction on Lindenbaum-Tarski algebra]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-disj}
\end{agdadef}

Next, in order to define negation on the Lindenbaum-Tarski algebra, we need to show that the underlying operation of negation in the propositional calculus respects the equivalence relation $\sim$. This can be achieved by proving another lemma. 

\begin{lemma}
    For all formulas $\phi,\phi'$, if $\phi\sim \phi'$, then $ \neg \phi \sim \neg \phi'$.
\end{lemma}

\begin{proof}
    From the definition of $\sim$ we are given $\Gamma, \phi \vdash \phi'$ and $\Gamma, \phi' \vdash \phi$. We aim to show that $\Gamma, \neg \phi \vdash \neg \phi'$ and $\Gamma, \neg \phi' \vdash \neg \phi$. The two proofs are identical so we will only prove $\Gamma, \neg \phi \vdash \neg \phi'$ here. This is done through natural deduction,

    \begin{mathpar}
        \inferrule*[right=\scriptsize $\neg$-I]
            {\inferrule*[right=\scriptsize $\neg$-E]
                {\inferrule*[right=\scriptsize exchange]
                    {\inferrule*[right= \scriptsize weakening]
                        {\Gamma, \phi' \vdash \phi}
                        {\Gamma, \phi', \neg \phi \vdash \phi}}
                    {\Gamma, \neg \phi, \phi' \vdash \phi} \\
                \inferrule*[right=\scriptsize weakening]
                    {\inferrule*[right=\scriptsize axiom]
                        {\neg \phi \in \Gamma, \neg \phi}
                        {\Gamma, \neg \phi \vdash \neg \phi}}
                    {\Gamma,\neg \phi , \phi' \vdash \neg \phi}}
                {\Gamma, \neg \phi, \phi' \vdash \bot}}
            {\Gamma,\neg \phi \vdash \neg \phi'}
    \end{mathpar}
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{eq-respects-neg}
\end{proof}

This lemma shows that the negation operation on the propositional calculus respects the equivalence relation $\sim$, and allows us to define negation on the Lindenbaum-Tarski algebra in \CubicalAgda.

\begin{agdadef}[Negation on Lindenbaum-Tarski algebra]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-neg}
\end{agdadef}


The \texttt{setQuotUnaryOp} function takes two arguments: a unary operator ($\neg/$) and a proof that the operator respects the equivalence relation ($\sim$-respects-$\neg$). The resulting function takes one element $A$ in the Lindenbaum-Tarski algebra and returns its negation.

To construct the equivalence classes for propositional constants, we can use the constructor from the definition of a set quotient in the already existing definition of set quotients in \CubicalAgda.

\begin{agdadef}[Logical constants in Lindenbaum-Tarski algebra]$ $
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-top}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-bot}
\end{agdadef}


\subsection{Proof that the Lindenbaum-Tarski algebra is Boolean}

To prove that the Lindenbaum-Tarski algebra is a Boolean algebra we can show that it is a complemented distributive lattice. To do this there first needs to be a partial order defined on the set of equivalence classes.
\begin{definition}\label{order-relation}
    Let $\mathcal{L}$ be the propositional language described previously and let $S$ be the set of all sentences of $\mathcal{L}$. For each $\phi \in S$, let $[\phi]$ denote the equivalence class of $\phi$ under the equivalence relation $\sim$, and let $LT$ be the set of all such equivalence classes. Define the relation $\leq$ on $LT$ by
    \begin{align*}
        [\phi] \leq [\psi] \quad \text{iff} \quad \Gamma, \phi \vdash \psi
    \end{align*}
    and define join, meet and complementation as follows:
    \begin{align*}
        [\phi] \vee [\psi] \equiv [\phi \vee \psi], \quad [\phi] \wedge [\psi] \equiv [\phi \wedge \psi], \quad \neg[\phi] \equiv [\neg \phi].
    \end{align*}
\end{definition}
Note that the operators on the left hand side are operating on the equivalence classes, i.e. the elements of the Lindenbaum-Tarski algebra, and the operators on the right hand side are operating on formulas in the underlying propositional calculus.

\begin{proposition}
    The relation $\leq$ is a partial order on $LT$.
\end{proposition}

\begin{proof}
    First, we must show that the relation is well defined on $LT$. If $\phi_2 \in [\phi_1]$ and $\psi_2 \in [\psi_1]$, then 
    \begin{align*}
        [\phi_1] \leq [\psi_1] \quad \text{implies} \quad [\phi_2] \leq [\psi_2],
    \end{align*}
    or equivalently, using the definition above,
    \begin{align*}
        \Gamma, \phi_1 \vdash \psi_1 \quad \text{implies} \quad \Gamma, \phi_2 \vdash \psi_2
    \end{align*}
    where $\Gamma$ a context. Given $\phi_2 \in [\phi_1]$, we have that $\phi_1 \sim \phi_2$ which means that $\Gamma, \phi_1 \vdash \phi_2$ and $\Gamma, \phi_2 \vdash \phi_1$. Similarly, since $\psi_1 \sim \psi_2$, we have that $\Gamma, \psi_1 \vdash \psi_2$ and $\Gamma, \psi_2 \vdash \psi_1$. By applying Lemma \ref{trans-lemma} to $\Gamma, \phi_2 \vdash \phi_1$ and the assumption $\Gamma, \phi_1 \vdash \psi_1$, we get $\Gamma, \phi_2 \vdash \psi_1$. Applying the lemma again to the previous result together with $\Gamma, \psi_1 \vdash \psi_2$ yields $\Gamma, \phi_2 \vdash \psi_2$, showing that the relation is well defined. The operations join, meet and complementation have been shown to be well defined in the previous section when we defined the operations on the Lindenbaum-Tarski algebra.

    Now, we need to show that $\leq$ is an order relation. Reflexivity follows immediately from the axiom rule. For anti-symmetry, suppose $[\phi] \leq [\psi]$ and $[\psi] \leq [\phi]$, then we have that $\Gamma, \phi \vdash \psi$ and $\Gamma, \psi \vdash \phi$, so by definition of the equivalence relation we have $\phi \sim \psi$. This means that $[\phi] \equiv [\psi]$, hence $\leq$ is anti-symmetric. Finally for transitivity assume that $[\phi] \leq [\psi]$ and $[\psi] \leq [\gamma]$, then we have $\Gamma, \phi \vdash \psi$ and $\Gamma, \psi \vdash \gamma$. Here we can apply Lemma \ref{trans-lemma} and get $\Gamma, \phi \vdash \gamma$, that is $[\phi] \leq [\gamma]$. Hence we can conclude that $\langle LT, \leq \rangle$ is a partially ordered set.
\end{proof}


\begin{definition}[Lattice]\label{lattice}
    A lattice is a non-empty partially ordered set $\langle L, \leq \rangle$ where every $x,y \in L$ has a supremum $x\vee y$, also called join, and an infimum $x \wedge y$, also called meet. It follows from this definition that
    $$x \leq y \quad \text{iff} \quad x \vee y = y \quad \text{iff} \quad x \wedge y = x.$$
\end{definition}

\begin{definition}
    A lattice $L$ is distributive if for all $x,y,z \in L$,
    \begin{align*}
        x \wedge (y \vee z) = (x \wedge y) \vee (x \wedge z), \\
        x \vee (y \wedge z) = (x \vee y) \wedge (x \vee z).
    \end{align*}
\end{definition}

\begin{definition}
    A lattice $L$ is complemented if there exist both least and greatest elements in $L$, denoted $\bot$ and $\top$, and for every $x\in L$ there exists $y\in L$ such that
    $$x \vee y = \top \quad \text{and} \quad x\wedge y = \bot.$$
\end{definition}

\begin{definition}
    A Boolean algebra is a complemented distributive lattice.
\end{definition}

\begin{theorem}\label{LT-bool}
    The Lindenbaum-Tarski algebra is a Boolean algebra.
\end{theorem}

\begin{proof}
    First we must show that the $\langle LT, \leq \rangle$ is a lattice. To do this we must show that any two elements $[\phi],[\psi]\in LT$ has both a supremum and infimum, $[\phi] \vee [\psi]$ and $[\phi] \wedge[\psi]$ respectively. 
    
    To show that $[\phi] \vee [\psi]$ is an upper bound for $\{[\phi],[\psi]\}$ we need to show both that $[\phi] \leq [\phi \vee \psi]$ and that $[\psi] \leq [\phi \vee \psi]$. From reflexivity we have $[\phi] \leq [\phi]$, or $\Gamma, \phi \vdash \phi$. Using disjunction introduction we get $\Gamma, \phi \vdash \phi \vee \psi$, hence $[\phi] \leq [\phi \vee \psi]$ which is equivalent to $[\phi] \leq [\phi] \vee [\psi]$. With an identical argument we also get that $[\psi] \leq [\phi]\vee [\psi]$. To show that this is the least upper bound, assume that $[\gamma]$ is any other upper bound for $\{[\phi],[\psi]\}$, then $[\phi] \leq [\gamma]$ and $[\psi] \leq [\gamma]$. This means that we have $\Gamma, \phi \vdash \gamma$ and $\Gamma, \psi \vdash \gamma$. From the axiom rule and disjunction elimination rule we can deduce
    \begin{mathpar}
        \inferrule*[right = \scriptsize exchange, lab=$\mathcal{D}_1$]
                {\inferrule*[right= \scriptsize weakening]
                    {\Gamma, \phi \vdash \gamma}
                    {\Gamma, \phi, \phi \vee \psi \vdash \gamma}}
                {\Gamma, \phi \vee \psi, \phi \vdash \gamma}
        \quad
        \inferrule*[right = \scriptsize exchange, lab=$\mathcal{D}_2$]
        {\inferrule*[right= \scriptsize weakening]
            {\Gamma, \psi \vdash \gamma}
            {\Gamma, \psi, \phi \vee \psi \vdash \gamma}}
        {\Gamma, \phi \vee \psi, \psi \vdash \gamma}
    \end{mathpar}
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\vee$-E]
            {\inferrule*[right=axiom]
                {\phi \vee \psi \in \Gamma,\phi \vee \psi}
                {\Gamma, \phi \vee \psi \vdash \phi \vee \psi} \\
            \mathcal{D}_1 \\
            \mathcal{D}_2}
            {\Gamma, \phi \vee \psi \vdash \gamma}
    \end{mathpar}
    
    Then $[\phi \vee \psi] \equiv [\phi] \vee [\psi] \leq [\gamma]$. Hence $[\phi] \vee [\psi]$ is the least upper bound, i.e. the supremum.
    
    Showing that $[\phi] \wedge [\psi]$ is the infimum is similar. It should be clear that from conjunction elimination we have both $\Gamma, \phi \wedge \psi \vdash \phi$ and $\Gamma, \phi \wedge \psi \vdash \psi$, so $[\phi \wedge \psi] \equiv [\phi] \wedge [\psi] \leq \phi$ and $[\phi \wedge \psi] \equiv [\phi] \wedge [\psi] \leq \psi$. Now assume that $[\gamma]$ is any other lower bound for $\{[\phi],[\psi]\}$, then $[\gamma] \leq [\phi]$ and $[\gamma] \leq [\psi]$. This means that $\Gamma, \gamma \vdash \phi$ and $\Gamma, \gamma \vdash \psi$, and we can conclude that $\Gamma, \gamma \vdash \phi \wedge \psi$, hence $[\gamma] \leq [\phi \wedge \psi] \equiv [\phi] \wedge [\psi]$. 

    We have now shown that $\langle LT, \leq \rangle$ is a lattice. Distributivity follows from the distributive properties of propositional calculus, shown in Section \ref{dist-section}. Having shown that $\langle LT, \leq \rangle$ is a distributive lattice, all that is left is to show that it is also complemented. In Definition \ref{order-relation} we defined complementation of an element $[\phi]$ to be $\neg [\phi] = [\neg \phi]$. This complement is unique\cite{Tay:2012}, therefore we need to show that 
    \begin{align*}
        [\phi] \vee \neg [\phi] \equiv [\top] \quad \text{and} \quad [\phi] \wedge \neg [\phi] \equiv [\bot].
    \end{align*}
    Since we have that
    $$[\phi]\vee \neg [\phi] \equiv [\phi]\vee [\neg \phi] \equiv [\phi \vee \neg \phi]$$
    it suffices to show that $\Gamma, \phi \vee \neg \phi \vdash \top$ and $\Gamma, \top \vdash \phi \vee \neg \phi$. This is done with $\top$-I and LEM respectively, and then applying weakening repeatedly. To show $[\phi] \wedge \neg [\phi] \equiv [\bot]$ we first we need to show $\Gamma, \phi \wedge \neg \phi \vdash \bot$, this is done by conjunction elimination and negation elimination,
    \begin{mathpar}
        \inferrule*[right=\scriptsize $\neg$-E]
            {\inferrule*[right= \scriptsize $\wedge$-E$_1$]
                {\inferrule*[right=\scriptsize axiom]
                    {\phi \wedge \neg \phi \in \Gamma, \phi \wedge \neg \phi}
                    {\Gamma,\phi \wedge \neg \phi \vdash \phi \wedge \neg \phi}}
                {\Gamma,\phi \wedge \neg \phi \vdash \phi} \\
            \inferrule*[right= \scriptsize $\wedge$-E$_2$]
                {\inferrule*[right=\scriptsize axiom]
                {\phi \wedge \neg \phi \in \Gamma, \phi \wedge \neg \phi}
                {\Gamma,\phi \wedge \neg \phi \vdash \phi \wedge \neg \phi}}
                {\Gamma,\phi \wedge \neg \phi \vdash \neg \phi}}
            {\Gamma,\phi \wedge \neg \phi \vdash \bot}
    \end{mathpar}
    The other direction, i.e $\Gamma, \bot \vdash \phi \wedge \neg \phi$, is just applying $\bot$-E. This shows that $\langle LT, \leq \rangle$ is a complemented distributive lattice, and thus a Boolean algebra.
\end{proof}

Before we formalize a proof in \Agda we need to be able to do repeated weakening from the empty context, as the way we have formalized the weakening rule does not quite allow us to do that. It should be obvious that this is something that we are allowed to do, but we need to explicitly formalize it in \Agda. In particluar, we want to show that if $\vdash \phi$ holds, then $\Gamma \vdash \phi$ holds. This is done by induction on $\Gamma$.

\ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{superweakening}

We can now proceed with the \Agda proof of Theorem \ref{LT-bool}.

\begin{proof}[Agda proof]
    We make use of the fact that there is already a function for constructing a distributive lattice in the \agdaCubical library. We need only provide all the proofs needed for the arguments.
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-DistLattice}
    Lastly we also need to provide the proof that the lattice is complemented.
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{LT-complemented}
\end{proof}



%%%%%%%%%%%%%%%
%% Soundness %%
%%%%%%%%%%%%%%%

\subsection{Soundness}
Soundness is a fundamental property of logical systems that ensures that the conclusions drawn from the system are reliable and trustworthy. In particular, soundness guarantees that if a proposition can be derived using the inference rules of the logical system from a set of true premises, then that proposition is true.

So far we have dealt with purely syntactictal definitions. To speak about thruth values we must define the semantics.

\begin{definition}
    A truth valuation for $\mathcal{L}$ is a mapping $v$ from the set of sentences of $\mathcal{L}$ to the set $\{0,1\}$. We define such a truth valuation inductively. First, let $v_0$ be any function from the propositional variables into the set $\{0,1\}$. Then we extend $v_0$ uniquely into a function $v$ with all sentences of $\mathcal{L}$ as its domain, such that for all sentences $\phi$ and $\psi$,
    \[
    \begin{array}{lcl}
        v(\neg \phi) = 1 &\quad \text{if and only if}& \quad v(\phi) = 0 \\
        v(\phi \vee \psi) = 1 &\quad \text{if and only if} & \quad v(\phi)=1 \text{ or } v(\psi)=1 \\
        v(\phi \wedge \psi) = 1 &\quad \text{if and only if} & \quad  v(\phi) =1 \text{ and } v(\psi)=1 \\
        v(\top) = 1 & &\\
        v(\bot) = 0. & &
    \end{array}
    \]
    If these conditions are met, then $v$ is a truth valuation.
\end{definition}

The following proposition is from \cite{Tay:2012}. We shall not prove it here and the interested reader may refer to \cite{Tay:2012} for a detailed proof. However, we will use the results to reason about soundness.

\begin{proposition}
    If $h: LT \to \mathbf{2}$, where $\mathbf{2}$ is the minimal algebra, then $h([\phi])=v(\phi)$ is a truth valuation. Furthermore, if $v$ is a truth valuation, then $h : LT \to \mathbf{2}$ defined by $h([\phi])= v(\phi)$ is a homomorphism.
\end{proposition}

It should be clear that $h$ maps $[\top]$ to $1$ and will consequently map every element $[\phi] \in LT$ where $[\phi]\equiv [\top]$ to $1$ as well. We can use this to reason about the soundness of propositional calculus. If for any formula $\phi$ it holds that $\vdash \phi$, it should be the case that $[\phi] \equiv [\top]$.

\begin{proposition}
    For any sentence $\phi \in \mathcal{L}$, if $\vdash \phi$ then $\phi \sim \top$, meaning $[\phi] \equiv [\top]$.
\end{proposition}

\begin{proof}
    By definition of the Lindenbaum-Tarski algebra this is equivalent to showing that, given $\vdash \phi$, we can prove $\phi \vdash \top$ and $\top \vdash \phi$. This can be done using $\top$-I and (repeated*) weakening.
    \begin{mathpar}
        \inferrule*[right=\scriptsize weakening*]
            {\inferrule*[right=\scriptsize $\top$-I]
                { }
                {\vdash \top}}
            {\phi \vdash \top}
        \qquad
        \inferrule*[right= \scriptsize weakening*]
            {\vdash \phi}
            {\top \vdash \phi}
    \end{mathpar}
\end{proof}

\begin{proof}[Agda proof]
    $\:$
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{sound}
\end{proof}



\section{Conclusions}
We successfully formalized the Lindenbaum-Tarski algebra in \CubicalAgda. We ended up needing the structural rules weakening and exhcange, but contraction could be omitted. This resulted in our logic qualifying as an affine logic. It is worth noting that if we were to add implication to our set of logical connectives and redefine the biprovability relation as $$\phi \sim \psi \quad \text{if and only if} \quad \Gamma \vdash \phi \leftrightarrow \psi,$$ 
then we no longer need the exchange rule. However, an extra connective would result in more clutter and possible extra cases to account for in proofs.

By having formalized the Lindenbaum-Tarski algebra in \CubicalAgda we can now use it to prove properties about propositional calculus. We did use it to reason about soundness already, and this could be done more thoroughly by using Boolean ideals and filters not formalized here\cite{Tressl:2022}\cite{Tay:2012}.

The full formalization can be found in Appendix \ref{code} and on Github\cite{LTgit}.


\subsection{Future work}
We have formalized the Lindenbaum-Tarski algebra over a propositional language, the next natural step would be to define it over a first order language. The equivalence relation $\sim$ and the binary relations together with negation is defined as previously, but we would need to extend the language with quantifiers and variables, and implement the rules surrounding these.











% References
\newpage
\bibliography{refs}

% Appendices
\newpage
\begin{appendices}
    \section{LindenbaumTarski.agda}\label{code}
    \ExecuteMetaData[agda/latex/LindenbaumTarski.tex]{src}
\end{appendices}

\end{document}
